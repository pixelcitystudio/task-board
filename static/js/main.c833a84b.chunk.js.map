{"version":3,"sources":["components/header/Header.tsx","assets/icons/AddIcon.tsx","assets/icons/MoreVertIcon.tsx","components/widgets/MenuButton.tsx","components/board/TaskMenuButton.tsx","components/board/Task.tsx","components/board/TaskDraggable.tsx","components/board/TaskDragHelper.ts","components/board/Placeholder.tsx","components/board/TaskBoard.tsx","components/app/BrowserCheck.tsx","utils/utils.ts","state/initialState.ts","components/app/App.tsx","index.js"],"names":["Header","_ref","users","react_default","a","createElement","className","href","map","u","key","id","label","AddIcon","width","height","viewBox","aria-hidden","role","d","fill","MoreVertIcon","MenuButton","state","open","containerElement","handleButtonClick","_this","props","disabled","setState","handleContainerMouseDown","e","stopPropagation","handleDocumentMouseDown","target","Node","contains","handleDocumentKeyDown","escape","keyCode","enter","focusInside","document","activeElement","handleItemClick","itemOnClick","this","addEventListener","removeEventListener","_this2","_this$props","buttonContent","items","ref","onClick","length","item","text","React","Component","TaskMenuButton","startEditing","remove","components_widgets_MenuButton","icons_MoreVertIcon","FADE_IN_DURATION","FADE_OUT_DURATION","TaskComponent","visible","removing","rootElement","textareaElement","handleTextarea","task","creating","focus","handleTextChange","onChange","value","description","endsWith","substring","Object","objectSpread","handleKeyPress","_this$props2","editing","cancelEdit","_this$props3","userLabel","labels","fadeOut","fadeIn","setTimeout","scrollHeight","clientHeight","_this$props4","checkJustDropped","_this$props5","justDropped","_this$props6","elementRef","contentRef","dragged","_this$state","style","undefined","spellCheck","onKeyPress","onBlur","components_board_TaskMenuButton","l","name","color","PureComponent","TaskDraggable","contentElement","handleMouseDown","button","cancelable","preventDefault","onMouseDown","clientX","clientY","taskIndex","columnIndex","handleMouseUp","handleTouchStart","touches","handleMouseMove","onMouseMove","handleTouchMove","onMouseUp","handleRef","handleContentRef","handleChange","handleRemove","handleTaskMouseUp","blur","window","board_Task","SCROLL_THRESHOLD","DragDropHelper","mouseDown","mouseStartX","mouseStartY","mouseX","mouseY","startX","startY","dragInProgress","draggedElement","boardElement","boardWidth","boardHeight","taskId","columns","tasks","taskLists","hoveredColumnIndex","hoveredTaskIndex","scrollXAnimationDirection","scrollYAnimationDirection","scrollXAnimation","scrollYAnimation","horizontalScrollElement","scrollXOnDragStart","scrollYOnDragStart","onStart","onHover","onDrop","onEnd","checkForScroll","x","y","_this$getScrollDirect","getScrollDirections","scrollX","scrollY","cancel","startScrollAnimation","r","getBoundingClientRect","left","innerWidth","top","innerHeight","clearSelection","offsetLeft","offsetTop","clientWidth","childNodes","forEach","columnElement","i","HTMLDivElement","push","querySelectorAll","taskElement","j","taskListElement","querySelector","calculateBoardHeight","scrollLeft","deltaX","deltaY","dragJustStarted","Math","hypot","minHeight","xAdjusted","yAdjusted","maxX","maxY","clampedX","max","min","clampedY","BOARD_BOUNDS_Y_INSET","recordHoverLocation","classList","add","_this3","hoverStartX","hoverStartY","reduce","t","k","destX","destY","cleanUp","dragMidX","dragMidY","column","midX","abs","yOffset","_this4","maxTaskBoardHeight","c","sum","selection","getSelection","empty","removeAllRanges","vertical","increasing","start","_this5","cancelled","initial","requestAnimationFrame","step","timestamp","delta","currentScrollRate","pow","newScroll","scrollTo","Placeholder","expanded","prevProps","TaskBoard","dropping","dragHelper","TaskDragHelper","endDrag","handleDragStart","draggedTaskId","draggedTaskIndex","draggedTaskHeight","draggedColumnIndex","stopEdits","dragState","dataSnapshot","data","handleDragHover","handleDragDrop","notifyChange","handleDragEnd","addTask","newTask","uuid","newData","toConsumableArray","newColumn","concat","removeTask","splice","updateTask","setOnStart","setOnHover","setOnDrop","setOnEnd","columnHovered","columnCreating","some","icons_AddIcon","components_board_Placeholder","hoveredAfter","Fragment","board_TaskDraggable","droppedTask","sourceTasks","destinationTasks","browserOk","agent","navigator","userAgent","match","isIE","BrowserCheck","children","initialState","WebFont","load","google","families","App","components_app_BrowserCheck","components_header_Header","components_board_TaskBoard","ReactDOM","render","components_app_App","getElementById"],"mappings":"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","file":"static/js/main.c833a84b.chunk.js","sourcesContent":["import React from 'react'\nimport { User } from '../../state'\nimport './Header.scss'\n\ninterface HeaderProps {\n  users: User[]\n}\n\nconst Header: React.FunctionComponent<HeaderProps> = ({ users }) => (\n  <div className=\"header\">\n    <h1>\n      <a href=\"https://www.github.com/rmfisher/task-board\">Bug Tracking</a>\n    </h1>\n    <div className=\"avatars\">\n      {users.map(u => (\n        <div key={u.id} className={'avatar ' + u.label} />\n      ))}\n    </div>\n  </div>\n)\n\nexport default Header\n","import React from 'react'\n\nconst AddIcon = () => (\n  <svg className=\"icon add-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\">\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" className=\"fill\" />\n  </svg>\n)\n\nexport default AddIcon\n","import React from 'react'\n\nconst MoreVertIcon = () => (\n  <svg\n    className=\"icon more-vert-icon\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    aria-hidden=\"true\"\n    role=\"presentation\"\n  >\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path\n      d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n      className=\"fill\"\n    />\n  </svg>\n)\n\nexport default MoreVertIcon\n","import React from 'react'\nimport './MenuButton.scss'\n\ninterface MenuItemProps {\n  text: string\n  onClick: () => void\n}\n\ninterface MenuButtonProps {\n  className: string\n  buttonContent: React.ReactNode\n  items: Array<MenuItemProps>\n  disabled: boolean\n}\n\ninterface MenuButtonState {\n  open: boolean\n}\n\nclass MenuButton extends React.Component<MenuButtonProps, MenuButtonState> {\n  public readonly state = { open: false }\n  private containerElement!: HTMLDivElement\n\n  public componentDidMount() {\n    this.containerElement.addEventListener('mousedown', this.handleContainerMouseDown)\n    document.addEventListener('mousedown', this.handleDocumentMouseDown, true)\n    document.addEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public componentWillUnmount() {\n    this.containerElement.removeEventListener('mousedown', this.handleContainerMouseDown)\n    document.removeEventListener('mousedown', this.handleDocumentMouseDown, true)\n    document.removeEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public render() {\n    const { className, buttonContent, items } = this.props\n    const { open } = this.state\n    return (\n      <div\n        className={'menu-button-container' + (className ? ' ' + className : '') + (open ? ' open' : '')}\n        ref={e => (this.containerElement = e as HTMLDivElement)}\n      >\n        <button className=\"menu-button\" onClick={this.handleButtonClick}>\n          {buttonContent}\n        </button>\n        {open && items.length > 0 && (\n          <div className=\"menu-anchor\">\n            <div className=\"menu-content\">\n              {items.map(item => (\n                <button\n                  key={item.text}\n                  className=\"menu-item\"\n                  role=\"button\"\n                  onClick={() => this.handleItemClick(item.onClick)}\n                >\n                  {item.text}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  private handleButtonClick = () => {\n    if (!this.props.disabled) {\n      this.setState({ open: !this.state.open })\n    }\n  }\n\n  private handleContainerMouseDown = (e: MouseEvent) => {\n    if (this.state.open) {\n      e.stopPropagation()\n    }\n  }\n\n  private handleDocumentMouseDown = (e: MouseEvent) => {\n    if (this.state.open && e.target instanceof Node && !this.containerElement.contains(e.target)) {\n      this.setState({ open: false })\n    }\n  }\n\n  private handleDocumentKeyDown = (e: KeyboardEvent) => {\n    if (this.state.open) {\n      const escape = e.key === 'Escape' || e.keyCode === 27\n      const enter = e.key === 'Enter' || e.keyCode === 13\n      const focusInside = this.containerElement && this.containerElement.contains(document.activeElement)\n      if (escape || (enter && !focusInside)) {\n        this.setState({ open: false })\n      }\n    }\n  }\n\n  private handleItemClick = (itemOnClick: () => void) => {\n    this.setState({ open: false })\n    itemOnClick()\n  }\n}\n\nexport default MenuButton\n","import React from 'react'\nimport MoreVertIcon from '../../assets/icons/MoreVertIcon'\nimport MenuButton from '../widgets/MenuButton'\nimport './TaskMenuButton.scss'\n\ninterface TaskMenuButtonProps {\n  startEditing: () => void\n  remove: () => void\n  disabled: boolean\n}\n\nconst TaskMenuButton: React.FunctionComponent<TaskMenuButtonProps> = ({ startEditing, remove, disabled }) => (\n  <MenuButton\n    className=\"task-menu-button\"\n    buttonContent={<MoreVertIcon />}\n    items={[\n      { text: 'Edit', onClick: startEditing },\n      { text: 'Assign', onClick: () => {} },\n      { text: 'Tags', onClick: () => {} },\n      { text: 'Delete', onClick: remove },\n    ]}\n    disabled={disabled}\n  />\n)\n\nexport default TaskMenuButton\n","import React from 'react'\nimport TaskMenuButton from './TaskMenuButton'\nimport { Task } from '../../state'\nimport './Task.scss'\n\nconst FADE_IN_DURATION = 260\nconst FADE_OUT_DURATION = FADE_IN_DURATION + 120\n\ninterface TaskProps {\n  task: Task\n  elementRef: any\n  contentRef: any\n  dragged: boolean\n  onChange: (task: Task) => void\n  remove: () => void\n}\n\ninterface TaskState {\n  visible: boolean\n  removing: boolean\n  height: number | null\n}\n\nclass TaskComponent extends React.PureComponent<TaskProps, TaskState> {\n  public readonly state = { visible: false, removing: false, height: 0 }\n  private rootElement!: HTMLDivElement\n  private textareaElement: HTMLTextAreaElement | null = null\n\n  public componentDidMount() {\n    if (this.props.task.creating) {\n      this.fadeIn()\n    }\n    document.addEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public render() {\n    const { task, elementRef, contentRef, dragged } = this.props\n    const { visible, removing, height } = this.state\n    const style = (task.creating || removing) && height !== null ? { height } : undefined\n    this.checkJustDropped()\n    return (\n      <div\n        className={\n          'task-container' +\n          (removing ? ' removing' : '') +\n          (visible ? ' visible' : '') +\n          (task.creating ? ' creating' : '') +\n          (task.editing ? ' editing' : '') +\n          (task.justDropped ? ' just-dropped' : '')\n        }\n        style={style}\n        ref={e => {\n          this.rootElement = e as HTMLDivElement\n          elementRef(e)\n        }}\n      >\n        <div className=\"task\">\n          <div className=\"task-content\" ref={contentRef}>\n            <div className=\"top-container\">\n              <div className=\"text-container\">\n                <div className=\"description\">{task.description}</div>\n                {task.editing && (\n                  <textarea\n                    spellCheck={false}\n                    value={task.description}\n                    onChange={this.handleTextChange}\n                    onKeyPress={this.handleKeyPress}\n                    ref={this.handleTextarea}\n                    onBlur={this.cancelEdit}\n                  />\n                )}\n              </div>\n              <TaskMenuButton\n                startEditing={this.startEditing}\n                remove={this.fadeOut}\n                disabled={dragged || !!task.editing}\n              />\n            </div>\n            {task.userLabel && <div className={'avatar ' + task.userLabel} />}\n            {task.labels && task.labels.length > 0 && (\n              <div className=\"labels\">\n                {task.labels.map(l => (\n                  <div key={l.name} className={'label ' + l.color}>\n                    {l.name}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  private handleTextarea = (e: HTMLTextAreaElement | null) => {\n    if (this.textareaElement) {\n      this.textareaElement.removeEventListener('mousedown', this.stopPropagation)\n      this.textareaElement.removeEventListener('mouseup', this.stopPropagation)\n    }\n    this.textareaElement = e\n    if (this.textareaElement) {\n      this.textareaElement.addEventListener('mousedown', this.stopPropagation)\n      this.textareaElement.addEventListener('mouseup', this.stopPropagation)\n      if (!this.props.task.creating) {\n        this.textareaElement.focus()\n      }\n    }\n  }\n\n  private handleTextChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const { task, onChange } = this.props\n    const value = e.target.value\n    const description = value.endsWith('\\n') ? value.substring(0, value.length - 1) : value\n    onChange({ ...task, description })\n  }\n\n  private handleKeyPress = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' || e.keyCode === 13) {\n      const { task, onChange } = this.props\n      onChange({ ...task, editing: false, creating: false })\n    }\n  }\n\n  private handleDocumentKeyDown = (e: KeyboardEvent) => {\n    if ((e.key === 'Escape' || e.keyCode === 27) && this.props.task.editing && !this.state.height) {\n      this.cancelEdit()\n    }\n  }\n\n  private cancelEdit = () => {\n    const { task, onChange } = this.props\n    const { removing } = this.state\n    if (task.creating && !removing) {\n      if (!task.description && !task.userLabel && task.labels.length === 0) {\n        this.fadeOut()\n      } else if (task.editing) {\n        onChange({ ...task, editing: false, creating: false })\n      }\n    } else if (task.editing && !removing) {\n      onChange({ ...task, editing: false })\n    }\n  }\n\n  private fadeIn = () => {\n    setTimeout(() => this.setState({ visible: true, height: this.rootElement.scrollHeight }), 1)\n    setTimeout(() => {\n      if (this.textareaElement) {\n        this.textareaElement.focus()\n      }\n      this.setState({ height: null })\n    }, FADE_IN_DURATION)\n  }\n\n  private fadeOut = () => {\n    this.setState({ height: this.rootElement.clientHeight, removing: true })\n    setTimeout(() => {\n      this.setState({ visible: false, height: 0 })\n      setTimeout(() => {\n        this.props.remove()\n      }, FADE_OUT_DURATION)\n    }, 50)\n  }\n\n  private startEditing = () => {\n    const { task, onChange } = this.props\n    if (!task.editing) {\n      onChange({ ...task, editing: true })\n    }\n  }\n\n  private checkJustDropped = () => {\n    const { task, onChange } = this.props\n    if (task.justDropped) {\n      setTimeout(() => onChange({ ...task, justDropped: false }), 100)\n    }\n  }\n\n  private stopPropagation = (e: MouseEvent) => e.stopPropagation()\n}\n\nexport default TaskComponent\n","import React from 'react'\nimport { Task } from '../../state'\nimport TaskComponent from './Task'\n\ninterface TaskDraggableProps {\n  task: Task\n  taskIndex: number\n  columnIndex: number\n  dragged?: boolean\n  onMouseDown: (\n    mouseX: number,\n    mouseY: number,\n    draggedElement: HTMLDivElement,\n    taskId: string,\n    taskIndex: number,\n    columnIndex: number\n  ) => void\n  onMouseMove: (mouseX: number, mouseY: number) => void\n  onMouseUp: () => void\n  onChange: (columnIndex: number, taskIndex: number, task: Task) => void\n  remove: (columnIndex: number, taskIndex: number) => void\n}\n\nclass TaskDraggable extends React.PureComponent<TaskDraggableProps> {\n  private rootElement!: HTMLDivElement\n  private contentElement!: HTMLDivElement\n\n  public componentDidMount() {\n    this.contentElement.addEventListener('mousedown', this.handleMouseDown)\n    this.contentElement.addEventListener('touchstart', this.handleTouchStart)\n    this.contentElement.addEventListener('mouseup', this.handleTaskMouseUp)\n    document.addEventListener('mousemove', this.handleMouseMove)\n    document.addEventListener('touchmove', this.handleTouchMove)\n    window.addEventListener('mouseup', this.handleMouseUp)\n    window.addEventListener('blur', this.handleMouseUp)\n    window.addEventListener('touchend', this.handleMouseUp)\n  }\n\n  public componentWillUnmount() {\n    this.contentElement.removeEventListener('mousedown', this.handleMouseDown)\n    this.contentElement.removeEventListener('touchstart', this.handleTouchStart)\n    this.contentElement.removeEventListener('mouseup', this.handleTaskMouseUp)\n    document.removeEventListener('mousemove', this.handleMouseMove)\n    document.removeEventListener('touchmove', this.handleTouchMove)\n    window.removeEventListener('mouseup', this.handleMouseUp)\n    window.removeEventListener('blur', this.handleMouseUp)\n    window.removeEventListener('touchend', this.handleMouseUp)\n  }\n\n  public render() {\n    return (\n      <TaskComponent\n        task={this.props.task}\n        elementRef={this.handleRef}\n        contentRef={this.handleContentRef}\n        dragged={!!this.props.dragged}\n        onChange={this.handleChange}\n        remove={this.handleRemove}\n      />\n    )\n  }\n\n  private handleMouseDown = (e: MouseEvent) => {\n    if (e.button === 0) {\n      if (e.cancelable) {\n        e.preventDefault()\n      }\n      if (!this.props.task.editing) {\n        this.props.onMouseDown(\n          e.clientX,\n          e.clientY,\n          this.rootElement,\n          this.props.task.id,\n          this.props.taskIndex,\n          this.props.columnIndex\n        )\n      }\n    } else {\n      this.handleMouseUp()\n    }\n  }\n\n  private handleTouchStart = (e: TouchEvent) => {\n    if (e.touches.length === 1) {\n      if (e.cancelable) {\n        e.preventDefault()\n      }\n      this.props.onMouseDown(\n        e.touches[0].clientX,\n        e.touches[0].clientY,\n        this.rootElement,\n        this.props.task.id,\n        this.props.taskIndex,\n        this.props.columnIndex\n      )\n    }\n  }\n\n  private handleMouseMove = (e: MouseEvent) => {\n    this.props.onMouseMove(e.clientX, e.clientY)\n  }\n\n  private handleTouchMove = (e: TouchEvent) => {\n    if (e.touches.length === 1) {\n      this.props.onMouseMove(e.touches[0].clientX, e.touches[0].clientY)\n    }\n  }\n\n  private handleMouseUp = () => this.props.onMouseUp()\n\n  private handleRef = (e: HTMLDivElement | null) => (this.rootElement = e as HTMLDivElement)\n\n  private handleContentRef = (e: HTMLDivElement | null) => (this.contentElement = e as HTMLDivElement)\n\n  private handleChange = (task: Task) => {\n    this.props.onChange(this.props.columnIndex, this.props.taskIndex, task)\n  }\n\n  private handleRemove = () => {\n    this.props.remove(this.props.columnIndex, this.props.taskIndex)\n  }\n\n  private handleTaskMouseUp = () => {\n    if (!this.props.task.editing) {\n      const activeElement = document.activeElement as any\n      if (activeElement) {\n        activeElement.blur()\n      }\n    }\n  }\n}\n\nexport default TaskDraggable\n","const BOARD_BOUNDS_X_INSET = 8\nconst BOARD_BOUNDS_Y_INSET = 0\nconst DRAG_START_THRESHOLD = 10\nconst HORIZONTAL_DROP_THRESHOLD = 0.5\nconst MARGIN_LEFT = 16\nconst RELEASE_TRANSITION_DURATION = 180\nconst BOARD_HEIGHT_OFFSET = 28\nconst SCROLL_THRESHOLD = 5 // Scroll if dragged task outside viewport by at least this (in px).\nconst SCROLL_RATE = 0.6 // Pixels per ms.\nconst SCROLL_ACCELERATION = 750 // Time in ms to reach scroll rate.\n\nclass DragDropHelper {\n  private mouseDown: boolean = false\n  private mouseStartX: number = 0\n  private mouseStartY: number = 0\n  private mouseX: number = 0\n  private mouseY: number = 0\n  private startX: number = 0\n  private startY: number = 0\n  private width!: number\n  private height!: number\n  private dragInProgress: boolean = false\n  private draggedElement!: HTMLDivElement\n  private boardElement!: HTMLDivElement\n  private boardWidth!: number\n  private boardHeight!: number\n  private taskId!: string\n  private taskIndex!: number\n  private columnIndex!: number\n  private columns!: Array<{ x: number; width: number }>\n  private tasks!: Array<Array<{ width: number; height: number }>>\n  private taskLists!: number[]\n  private hoveredColumnIndex?: number\n  private hoveredTaskIndex?: number\n  private scrollXAnimationDirection: number = 0\n  private scrollYAnimationDirection: number = 0\n  private scrollXAnimation?: { cancel: () => void }\n  private scrollYAnimation?: { cancel: () => void }\n  private horizontalScrollElement!: HTMLDivElement\n  private scrollXOnDragStart: number = 0\n  private scrollYOnDragStart: number = 0\n\n  private onStart!: (\n    taskId: string,\n    taskIndex: number,\n    taskHeight: number,\n    columnIndex: number,\n    hoveredColumnIndex?: number,\n    hoveredTaskIndex?: number\n  ) => void\n  private onHover!: (hoveredColumnIndex?: number, hoveredTaskIndex?: number) => void\n  private onDrop!: (hoveredColumnIndex?: number, hoveredTaskIndex?: number) => void\n  private onEnd!: () => void\n\n  public onMouseDown(\n    mouseX: number,\n    mouseY: number,\n    draggedElement: HTMLDivElement,\n    boardElement: HTMLDivElement,\n    taskId: string,\n    taskIndex: number,\n    columnIndex: number\n  ) {\n    this.clearSelection()\n    this.mouseDown = true\n    this.mouseStartX = mouseX\n    this.mouseStartY = mouseY\n    this.startX = draggedElement.offsetLeft\n    this.startY = draggedElement.offsetTop\n    this.width = draggedElement.clientWidth\n    this.height = draggedElement.clientHeight\n    this.draggedElement = draggedElement\n    this.boardElement = boardElement\n    this.boardWidth = boardElement.clientWidth\n    this.taskId = taskId\n    this.taskIndex = taskIndex\n    this.columnIndex = columnIndex\n\n    this.columns = []\n    this.tasks = []\n    this.taskLists = []\n    boardElement.childNodes.forEach((columnElement, i) => {\n      if (columnElement instanceof HTMLDivElement) {\n        this.columns.push({ x: columnElement.offsetLeft, width: columnElement.clientWidth })\n\n        this.tasks[i] = []\n        columnElement.querySelectorAll('.task-container').forEach((taskElement, j) => {\n          if (taskElement instanceof HTMLDivElement && taskElement !== draggedElement) {\n            this.tasks[i].push({ width: taskElement.clientWidth, height: taskElement.clientHeight })\n          }\n        })\n\n        const taskListElement = columnElement.querySelector('.task-list')\n        if (taskListElement instanceof HTMLDivElement) {\n          this.taskLists[i] = taskListElement.offsetTop\n        }\n      }\n    })\n    this.boardHeight = this.calculateBoardHeight()\n    this.horizontalScrollElement = document.querySelector('.task-board-overflow-container') as HTMLDivElement\n    this.scrollXOnDragStart = this.horizontalScrollElement.scrollLeft\n    this.scrollYOnDragStart = window.scrollY\n  }\n\n  public onMouseMove(mouseX: number, mouseY: number) {\n    if (this.mouseDown) {\n      this.mouseX = mouseX\n      this.mouseY = mouseY\n      const deltaX = mouseX - this.mouseStartX\n      const deltaY = mouseY - this.mouseStartY\n\n      let dragJustStarted = false\n      if (!this.dragInProgress && Math.hypot(deltaX, deltaY) > DRAG_START_THRESHOLD) {\n        this.dragInProgress = true\n        this.draggedElement.style.width = this.width + 'px'\n        this.draggedElement.style.height = this.height + 'px'\n        this.boardElement.style.minHeight = this.boardHeight + 'px'\n        dragJustStarted = true\n      }\n\n      if (this.dragInProgress) {\n        const x = this.startX + deltaX\n        const y = this.startY + deltaY\n        const viewportDeltaX = this.horizontalScrollElement.scrollLeft - this.scrollXOnDragStart\n        const viewportDeltaY = window.scrollY - this.scrollYOnDragStart\n\n        const xAdjusted = x + viewportDeltaX\n        const yAdjusted = y + viewportDeltaY\n\n        const minX = BOARD_BOUNDS_X_INSET\n        const minY = BOARD_BOUNDS_Y_INSET - 1\n        const maxX = this.boardWidth - this.width - BOARD_BOUNDS_X_INSET\n        const maxY = this.boardHeight - this.height - BOARD_BOUNDS_Y_INSET\n        const clampedX = Math.max(minX, Math.min(maxX, xAdjusted))\n        const clampedY = Math.max(minY, Math.min(maxY, yAdjusted))\n\n        this.draggedElement.style.left = clampedX + 'px'\n        this.draggedElement.style.top = clampedY + 'px'\n        this.recordHoverLocation(clampedX, yAdjusted)\n\n        if (dragJustStarted) {\n          this.onStart(\n            this.taskId,\n            this.taskIndex,\n            this.height,\n            this.columnIndex,\n            this.hoveredColumnIndex,\n            this.hoveredTaskIndex\n          )\n          this.draggedElement.classList.add('dragged')\n          this.draggedElement.classList.remove('creating')\n        } else {\n          this.onHover(this.hoveredColumnIndex, this.hoveredTaskIndex)\n        }\n\n        this.checkForScroll(xAdjusted, yAdjusted)\n      }\n    }\n  }\n\n  public endDrag() {\n    if (this.dragInProgress) {\n      this.draggedElement.classList.add('released')\n      this.draggedElement.classList.remove('dragged')\n\n      let hoverStartX: number, hoverStartY: number\n      const i = this.hoveredColumnIndex\n      const j = this.hoveredTaskIndex\n      if (i !== undefined && j !== undefined) {\n        hoverStartX = this.columns[i].x + MARGIN_LEFT\n        hoverStartY = this.tasks[i].reduce((r, t, k) => (k < j ? r + t.height : r), this.taskLists[i])\n      }\n\n      setTimeout(() => {\n        const destX = hoverStartX !== undefined ? hoverStartX : this.startX\n        const destY = hoverStartY !== undefined ? hoverStartY : this.startY\n        this.draggedElement.style.left = destX + 'px'\n        this.draggedElement.style.top = destY + 'px'\n      }, 1)\n\n      setTimeout(() => {\n        this.cleanUp()\n        this.onEnd()\n      }, RELEASE_TRANSITION_DURATION)\n\n      this.onDrop(this.hoveredColumnIndex, this.hoveredTaskIndex)\n    }\n\n    if (this.scrollXAnimation) {\n      this.scrollXAnimation.cancel()\n      this.scrollXAnimation = undefined\n    }\n    if (this.scrollYAnimation) {\n      this.scrollYAnimation.cancel()\n      this.scrollYAnimation = undefined\n    }\n    this.scrollXAnimationDirection = 0\n    this.scrollYAnimationDirection = 0\n    this.dragInProgress = false\n    this.mouseDown = false\n  }\n\n  public setOnStart(onStart: any) {\n    this.onStart = onStart\n  }\n\n  public setOnHover(onHover: any) {\n    this.onHover = onHover\n  }\n\n  public setOnDrop(onDrop: any) {\n    this.onDrop = onDrop\n  }\n\n  public setOnEnd(onEnd: any) {\n    this.onEnd = onEnd\n  }\n\n  private recordHoverLocation(x: number, y: number) {\n    const dragMidX = x + this.width / 2\n    const dragMidY = y + this.height / 2\n\n    let columnIndex\n    for (let i = 0; i < this.columns.length; i++) {\n      const column = this.columns[i]\n      const midX = column.x + column.width / 2\n      const delta = Math.abs(dragMidX - midX)\n      if (delta / column.width < HORIZONTAL_DROP_THRESHOLD) {\n        columnIndex = i\n        break\n      }\n    }\n\n    let taskIndex = 0\n    if (columnIndex !== undefined) {\n      const tasks = this.tasks[columnIndex]\n      let yOffset = this.taskLists[columnIndex]\n      for (let j = 0; j < tasks.length; j++) {\n        const task = tasks[j]\n        yOffset += task.height\n        if (dragMidY > yOffset) {\n          taskIndex = j + 1\n        }\n      }\n    }\n\n    if (columnIndex !== undefined) {\n      this.hoveredColumnIndex = columnIndex\n      this.hoveredTaskIndex = taskIndex\n    } else {\n      this.hoveredColumnIndex = undefined\n      this.hoveredTaskIndex = undefined\n    }\n  }\n\n  private cleanUp() {\n    if (this.draggedElement) {\n      this.draggedElement.classList.remove('released')\n      this.draggedElement.style.left = null\n      this.draggedElement.style.top = null\n      this.draggedElement.style.width = null\n      this.draggedElement.style.height = null\n    }\n    if (this.boardElement) {\n      this.boardElement.style.minHeight = null\n    }\n\n    this.hoveredColumnIndex = undefined\n    this.hoveredTaskIndex = undefined\n  }\n\n  private calculateBoardHeight() {\n    const maxTaskHeight = this.tasks.reduce((max, c, i) => {\n      const height = c.reduce((sum, t) => sum + t.height, 0) + this.taskLists[i]\n      return height > max ? height : max\n    }, 0)\n    const maxTaskBoardHeight = maxTaskHeight + this.draggedElement.clientHeight + BOARD_HEIGHT_OFFSET\n    return Math.max(maxTaskBoardHeight, this.boardElement.clientHeight)\n  }\n\n  private clearSelection() {\n    const selection = window.getSelection()\n    if (!selection) return\n    if (selection.empty) {\n      selection.empty()\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges()\n    }\n  }\n\n  private checkForScroll = (x: number, y: number) => {\n    const { scrollX, scrollY } = this.getScrollDirections(x, y)\n    if (scrollX !== this.scrollXAnimationDirection) {\n      if (this.scrollXAnimation) {\n        this.scrollXAnimation.cancel()\n      }\n      if (scrollX !== 0) {\n        this.scrollXAnimation = this.startScrollAnimation(false, scrollX > 0)\n      }\n      this.scrollXAnimationDirection = scrollX\n    }\n    if (scrollY !== this.scrollYAnimationDirection) {\n      if (this.scrollYAnimation) {\n        this.scrollYAnimation.cancel()\n      }\n      if (scrollY !== 0) {\n        this.scrollYAnimation = this.startScrollAnimation(true, scrollY > 0)\n      }\n      this.scrollYAnimationDirection = scrollY\n    }\n  }\n\n  private getScrollDirections = (x: number, y: number) => {\n    const r = this.boardElement.getBoundingClientRect()\n\n    let scrollX: number = 0\n    let scrollY: number = 0\n    if (r.left + x < -SCROLL_THRESHOLD) {\n      scrollX = -1\n    } else if (r.left + this.width + x > window.innerWidth + SCROLL_THRESHOLD) {\n      scrollX = 1\n    }\n\n    if (r.top + y < -SCROLL_THRESHOLD) {\n      scrollY = -1\n    } else if (r.top + this.height + y > window.innerHeight + SCROLL_THRESHOLD) {\n      scrollY = 1\n    }\n    return { scrollX, scrollY }\n  }\n\n  private startScrollAnimation(vertical: boolean, increasing: boolean) {\n    let cancelled = false\n    const initial = vertical ? window.scrollY : this.horizontalScrollElement.scrollLeft\n    let start: number\n    const step = (timestamp: number) => {\n      if (!cancelled) {\n        if (!start) start = timestamp\n        const delta = timestamp - start\n        const currentScrollRate = Math.min(Math.pow(delta / SCROLL_ACCELERATION, 2), SCROLL_RATE)\n        const newScroll = initial + delta * currentScrollRate * (increasing ? 1 : -1)\n        if (vertical) {\n          window.scrollTo(0, newScroll)\n          this.onMouseMove(this.mouseX, this.mouseY)\n        } else {\n          this.horizontalScrollElement.scrollTo(Math.min(newScroll, this.boardWidth - window.innerWidth), 0)\n          this.onMouseMove(this.mouseX, this.mouseY)\n        }\n\n        window.requestAnimationFrame(step)\n      }\n    }\n    window.requestAnimationFrame(step)\n    return { cancel: () => (cancelled = true) }\n  }\n}\n\nexport default DragDropHelper\n","import React from 'react'\nimport './Placeholder.scss'\n\ninterface PlaceholderProps {\n  height: number\n  expanded: boolean\n}\n\ninterface PlaceholderState {\n  height: number\n}\n\nclass Placeholder extends React.Component<PlaceholderProps, PlaceholderState> {\n  public readonly state = { height: this.props.expanded ? this.props.height : 0 }\n\n  public componentDidUpdate(prevProps: PlaceholderProps) {\n    if (prevProps.expanded !== this.props.expanded) {\n      this.setState({ height: this.props.expanded ? this.props.height : 0 })\n    }\n  }\n\n  public render() {\n    const { expanded } = this.props\n    const { height } = this.state\n    return (\n      <div className={'placeholder' + (expanded ? ' expanded' : '')} style={{ height }}>\n        <div className=\"placeholder-fill\" />\n      </div>\n    )\n  }\n}\n\nexport default Placeholder\n","import React from 'react'\nimport { v1 as uuid } from 'uuid'\nimport { Column, Task } from '../../state'\nimport AddIcon from '../../assets/icons/AddIcon'\nimport TaskDraggable from './TaskDraggable'\nimport TaskDragHelper from './TaskDragHelper'\nimport Placeholder from './Placeholder'\nimport './TaskBoard.scss'\n\ninterface TaskBoardProps {\n  data: Column[]\n  onChange: (data: Column[]) => void\n}\n\ninterface TaskBoardState {\n  dataSnapshot?: Column[]\n  dragState?: {\n    draggedTaskId: string\n    draggedTaskIndex: number\n    draggedTaskHeight: number\n    draggedColumnIndex: number\n    hoveredColumnIndex?: number\n    hoveredTaskIndex?: number\n  }\n  dropping: boolean\n}\n\nclass TaskBoard extends React.Component<TaskBoardProps, TaskBoardState> {\n  public readonly state: TaskBoardState = { dropping: false }\n\n  private rootElement!: HTMLDivElement\n  private dragHelper = new TaskDragHelper()\n\n  public componentDidMount() {\n    this.dragHelper.setOnStart(this.handleDragStart)\n    this.dragHelper.setOnHover(this.handleDragHover)\n    this.dragHelper.setOnDrop(this.handleDragDrop)\n    this.dragHelper.setOnEnd(this.handleDragEnd)\n  }\n\n  public render() {\n    const { data } = this.props\n    const { dataSnapshot, dragState, dropping } = this.state\n    return (\n      <div className={'task-board' + (dropping ? ' dropping' : '')} ref={e => (this.rootElement = e as HTMLDivElement)}>\n        {(dataSnapshot || data).map((c, i) => {\n          const columnHovered = dragState && dragState.hoveredColumnIndex === i\n          const columnCreating = c.tasks.some(t => !!t.creating)\n          return (\n            <div key={c.id} className=\"column\">\n              <h2>{c.label}</h2>\n              <button className=\"add-button raised\" onClick={() => this.addTask(i)} disabled={columnCreating}>\n                <AddIcon />\n              </button>\n              <div className=\"task-list\">\n                {dragState && (\n                  <Placeholder\n                    key={'hover-placeholder-0'}\n                    height={dragState.draggedTaskHeight}\n                    expanded={!!columnHovered && dragState.hoveredTaskIndex === 0}\n                  />\n                )}\n                {c.tasks.map((t, j) => {\n                  let dragged, hoveredAfter\n                  if (dragState) {\n                    dragged = dragState.draggedColumnIndex === i && dragState.draggedTaskId === t.id\n                    if (columnHovered) {\n                      if (\n                        dragState.draggedColumnIndex === i &&\n                        dragState.draggedTaskIndex < dragState.hoveredTaskIndex!\n                      ) {\n                        hoveredAfter = dragState.hoveredTaskIndex === j\n                      } else {\n                        hoveredAfter = dragState.hoveredTaskIndex === j + 1\n                      }\n                    }\n                  }\n                  return (\n                    <React.Fragment key={t.id}>\n                      <TaskDraggable\n                        key={t.id}\n                        task={t}\n                        taskIndex={j}\n                        columnIndex={i}\n                        dragged={dragged}\n                        onMouseDown={this.handleMouseDown}\n                        onMouseMove={this.handleMouseMove}\n                        onMouseUp={this.handleMouseUp}\n                        onChange={this.updateTask}\n                        remove={this.removeTask}\n                      />\n                      {dragState && t.id !== dragState.draggedTaskId && (\n                        <Placeholder\n                          key={'hover-placeholder-' + (j + 1)}\n                          height={dragState.draggedTaskHeight}\n                          expanded={!!hoveredAfter}\n                        />\n                      )}\n                    </React.Fragment>\n                  )\n                })}\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  private handleMouseDown = (\n    mouseX: number,\n    mouseY: number,\n    draggedElement: HTMLDivElement,\n    taskId: string,\n    taskIndex: number,\n    columnIndex: number\n  ) => {\n    this.dragHelper.onMouseDown(mouseX, mouseY, draggedElement, this.rootElement, taskId, taskIndex, columnIndex)\n  }\n\n  private handleMouseMove = (mouseX: number, mouseY: number) => {\n    this.dragHelper.onMouseMove(mouseX, mouseY)\n  }\n\n  private handleMouseUp = () => {\n    this.dragHelper.endDrag()\n  }\n\n  private handleDragStart = (\n    draggedTaskId: string,\n    draggedTaskIndex: number,\n    draggedTaskHeight: number,\n    draggedColumnIndex: number,\n    hoveredColumnIndex: number,\n    hoveredTaskIndex: number\n  ) => {\n    this.stopEdits(draggedColumnIndex, draggedTaskIndex)\n    this.setState({\n      dragState: {\n        draggedTaskId,\n        draggedTaskIndex,\n        draggedTaskHeight,\n        draggedColumnIndex,\n        hoveredColumnIndex,\n        hoveredTaskIndex,\n      },\n      dataSnapshot: this.props.data,\n    })\n  }\n\n  private handleDragHover = (hoveredColumnIndex?: number, hoveredTaskIndex?: number) => {\n    const { dragState } = this.state\n    if (hoveredColumnIndex !== dragState!.hoveredColumnIndex || hoveredTaskIndex !== dragState!.hoveredTaskIndex) {\n      this.setState({ dragState: { ...dragState!, hoveredColumnIndex, hoveredTaskIndex } })\n    }\n  }\n\n  private handleDragDrop = (columnIndex?: number, taskIndex?: number) => {\n    this.setState({ dropping: true })\n    if (columnIndex !== undefined && taskIndex !== undefined) {\n      const { draggedColumnIndex, draggedTaskIndex } = this.state.dragState!\n      if (draggedColumnIndex !== columnIndex || draggedTaskIndex !== taskIndex) {\n        this.notifyChange(draggedColumnIndex, draggedTaskIndex, columnIndex, taskIndex, true)\n      }\n    }\n  }\n\n  private handleDragEnd = () => {\n    this.setState({ dataSnapshot: undefined, dragState: undefined, dropping: false })\n  }\n\n  // Change position from source (i, j) to destination (k, l)\n  private notifyChange(i: number, j: number, k: number, l: number, justDropped?: boolean) {\n    const newData = [...this.props.data]\n    if (i === k) {\n      const tasks = [...newData[i].tasks]\n      const droppedTask = tasks.splice(j, 1)[0]\n      const newTask = justDropped ? { ...droppedTask, justDropped } : droppedTask\n\n      tasks.splice(l, 0, newTask)\n\n      newData[i] = { ...newData[i], tasks }\n    } else {\n      const sourceTasks = [...newData[i].tasks]\n      const destinationTasks = [...newData[k].tasks]\n      const droppedTask = sourceTasks.splice(j, 1)[0]\n      const newTask = justDropped ? { ...droppedTask, justDropped } : droppedTask\n\n      destinationTasks.splice(l, 0, newTask)\n\n      newData[i] = { ...newData[i], tasks: sourceTasks }\n      newData[k] = { ...newData[k], tasks: destinationTasks }\n    }\n    this.props.onChange(newData)\n  }\n\n  private addTask = (i: number) => {\n    const newTask = { id: uuid(), description: '', labels: [], creating: true, editing: true }\n    const newData = [...this.props.data]\n    const newColumn = { ...newData[i], tasks: [newTask, ...newData[i].tasks] }\n    newData[i] = newColumn\n\n    this.props.onChange(newData)\n  }\n\n  private removeTask = (i: number, j: number) => {\n    const newData = [...this.props.data]\n    newData[i].tasks = [...newData[i].tasks]\n    newData[i].tasks.splice(j, 1)\n    this.props.onChange(newData)\n  }\n\n  private stopEdits = (i: number, j: number) => {\n    const task = this.props.data[i].tasks[j]\n    if (task.creating || task.editing) {\n      this.updateTask(i, j, { ...task, creating: false, editing: false })\n    }\n  }\n\n  private updateTask = (i: number, j: number, newTask: Task) => {\n    const newData = [...this.props.data]\n    newData[i].tasks = [...newData[i].tasks]\n    newData[i].tasks[j] = newTask\n    this.props.onChange(newData)\n  }\n}\n\nexport default TaskBoard\n","import React from 'react'\nimport { isIE } from '../../utils/utils'\nimport './BrowserCheck.scss'\n\nconst browserOk = !isIE()\n\nconst BrowserCheck: React.FunctionComponent<{}> = ({ children }) =>\n  browserOk ? (\n    <React.Fragment>{children}</React.Fragment>\n  ) : (\n    <div className=\"unsupported-browser\">This page does not run on Internet Explorer.</div>\n  )\n\nexport default BrowserCheck\n","export const isIE = () => {\n  const agent = window.navigator.userAgent\n  return agent.match(/(MSIE|Trident)/) && !agent.match(/Edge/)\n}\n","import { State } from '.'\n\nexport const initialState: State = {\n  users: [{ id: '1', label: 'sorcerio' }, { id: '2', label: 'bean' }, { id: '3', label: 'elfo' }],\n  columns: [\n    {\n      id: 'c1',\n      label: 'Backlog',\n      tasks: [\n        {\n          id: 't1',\n          description: 'Font size is too small in registration form',\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Low', color: 'green' }, { name: 'All', color: 'yellow' }],\n        },\n        {\n          id: 't2',\n          description: 'Local storage is not cleaned up on logout',\n          userLabel: 'bean',\n          labels: [{ name: 'Medium', color: 'orange' }, { name: 'Chrome', color: 'lime' }],\n        },\n        {\n          id: 't3',\n          description: \"Login doesn't work if third-party cookies are disabled\",\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Low', color: 'green' }, { name: 'IE', color: 'blue' }],\n        },\n      ],\n    },\n    {\n      id: 'c2',\n      label: 'Ready',\n      tasks: [\n        {\n          id: 't4',\n          description: 'Items are missing from search results when filtering by date',\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Medium', color: 'orange' }, { name: 'All', color: 'yellow' }],\n        },\n        {\n          id: 't5',\n          description: 'Link clicks cause a full page reload',\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Medium', color: 'orange' }],\n        },\n      ],\n    },\n    {\n      id: 'c3',\n      label: 'In Progress',\n      tasks: [\n        {\n          id: 't6',\n          description: 'Apple Pay integration is broken on iOS',\n          userLabel: 'bean',\n          labels: [{ name: 'High', color: 'red' }],\n        },\n      ],\n    },\n    { id: 'c4', label: 'Done', tasks: [] },\n  ],\n}\n","import React from 'react'\nimport WebFont from 'webfontloader'\nimport Header from '../header/Header'\nimport TaskBoard from '../board/TaskBoard'\nimport BrowserCheck from './BrowserCheck'\nimport { Column, initialState } from '../../state'\nimport './App.scss'\n\nWebFont.load({\n  google: {\n    families: ['Lato:400,700,900'],\n  },\n})\n\ninterface AppState {\n  data: Column[]\n}\n\nclass App extends React.Component<{}, AppState> {\n  public readonly state: AppState = { data: initialState.columns }\n\n  public render() {\n    return (\n      <BrowserCheck>\n        <Header users={initialState.users} />\n        <div className=\"task-board-overflow-container\">\n          <TaskBoard data={this.state.data} onChange={this.handleChange} />\n        </div>\n      </BrowserCheck>\n    )\n  }\n\n  private handleChange = (data: Column[]) => {\n    this.setState({ data })\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/app/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}