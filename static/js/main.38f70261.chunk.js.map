{"version":3,"sources":["components/header/Header.tsx","assets/icons/AddIcon.tsx","assets/icons/MoreVertIcon.tsx","components/widgets/MenuButton.tsx","components/board/TaskMenuButton.tsx","components/board/Task.tsx","components/board/TaskDraggable.tsx","components/board/TaskDragHelper.ts","components/board/Placeholder.tsx","components/board/TaskBoard.tsx","components/app/BrowserCheck.tsx","utils/utils.ts","state/initialState.ts","components/app/App.tsx","index.js"],"names":["Header","_ref","users","react_default","a","createElement","className","href","map","u","key","id","label","AddIcon","width","height","viewBox","aria-hidden","role","d","fill","MoreVertIcon","MenuButton","state","open","containerElement","handleButtonClick","_this","props","disabled","setState","handleContainerMouseDown","e","stopPropagation","handleDocumentMouseDown","target","Node","contains","handleDocumentKeyDown","keyCode","handleItemClick","itemOnClick","this","addEventListener","document","removeEventListener","_this2","_this$props","buttonContent","items","ref","onClick","length","item","text","React","Component","TaskMenuButton","startEditing","remove","components_widgets_MenuButton","icons_MoreVertIcon","FADE_IN_DURATION","FADE_OUT_DURATION","TaskComponent","visible","removing","rootElement","textareaElement","handleTextarea","task","creating","focus","handleTextChange","onChange","value","description","endsWith","substring","Object","objectSpread","handleKeyPress","_this$props2","editing","cancelEdit","_this$props3","userLabel","labels","fadeOut","fadeIn","setTimeout","scrollHeight","clientHeight","_this$props4","checkJustDropped","_this$props5","justDropped","_this$props6","elementRef","contentRef","dragged","_this$state","style","undefined","spellCheck","onKeyPress","onBlur","components_board_TaskMenuButton","l","name","color","PureComponent","TaskDraggable","contentElement","handleMouseDown","button","cancelable","preventDefault","onMouseDown","clientX","clientY","taskIndex","columnIndex","handleMouseUp","handleTouchStart","touches","handleMouseMove","onMouseMove","handleTouchMove","onMouseUp","handleRef","handleContentRef","handleChange","handleRemove","handleTaskMouseUp","activeElement","blur","window","board_Task","SCROLL_THRESHOLD","DragDropHelper","mouseDown","mouseStartX","mouseStartY","mouseX","mouseY","startX","startY","dragInProgress","draggedElement","boardElement","boardWidth","boardHeight","taskId","columns","tasks","taskLists","hoveredColumnIndex","hoveredTaskIndex","scrollXAnimationDirection","scrollYAnimationDirection","scrollXAnimation","scrollYAnimation","horizontalScrollElement","scrollXOnDragStart","scrollYOnDragStart","onStart","onHover","onDrop","onEnd","checkForScroll","x","y","_this$getScrollDirect","getScrollDirections","scrollX","scrollY","cancel","startScrollAnimation","r","getBoundingClientRect","left","innerWidth","top","innerHeight","clearSelection","offsetLeft","offsetTop","clientWidth","childNodes","forEach","columnElement","i","HTMLDivElement","push","querySelectorAll","taskElement","j","taskListElement","querySelector","calculateBoardHeight","scrollLeft","deltaX","deltaY","dragJustStarted","Math","hypot","minHeight","xAdjusted","yAdjusted","maxX","maxY","clampedX","max","min","clampedY","BOARD_BOUNDS_Y_INSET","recordHoverLocation","classList","add","_this3","hoverStartX","hoverStartY","reduce","t","k","destX","destY","cleanUp","dragMidX","dragMidY","column","midX","abs","yOffset","_this4","maxTaskBoardHeight","c","sum","selection","getSelection","empty","removeAllRanges","vertical","increasing","start","_this5","cancelled","initial","requestAnimationFrame","step","timestamp","delta","currentScrollRate","pow","newScroll","scrollTo","Placeholder","expanded","prevProps","TaskBoard","dropping","dragHelper","TaskDragHelper","endDrag","handleDragStart","draggedTaskId","draggedTaskIndex","draggedTaskHeight","draggedColumnIndex","stopEdits","dragState","dataSnapshot","data","handleDragHover","handleDragDrop","notifyChange","handleDragEnd","addTask","newTask","uuid","newData","toConsumableArray","newColumn","concat","removeTask","splice","updateTask","setOnStart","setOnHover","setOnDrop","setOnEnd","columnHovered","columnCreating","some","icons_AddIcon","components_board_Placeholder","hoveredAfter","Fragment","board_TaskDraggable","droppedTask","sourceTasks","destinationTasks","browserOk","agent","navigator","userAgent","match","isIE","BrowserCheck","children","initialState","WebFont","load","google","families","App","components_app_BrowserCheck","components_header_Header","components_board_TaskBoard","ReactDOM","render","components_app_App","getElementById"],"mappings":"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","file":"static/js/main.38f70261.chunk.js","sourcesContent":["import React from 'react'\nimport { User } from '../../state'\nimport './Header.scss'\n\ninterface HeaderProps {\n  users: User[]\n}\n\nconst Header: React.FunctionComponent<HeaderProps> = ({ users }) => (\n  <div className=\"header\">\n    <h1>\n      <a href=\"https://www.github.com/rmfisher/task-board\">Bug Tracking</a>\n    </h1>\n    <div className=\"avatars\">\n      {users.map(u => (\n        <div key={u.id} className={'avatar ' + u.label} />\n      ))}\n    </div>\n  </div>\n)\n\nexport default Header\n","import React from 'react'\n\nconst AddIcon = () => (\n  <svg className=\"icon add-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\">\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" className=\"fill\" />\n  </svg>\n)\n\nexport default AddIcon\n","import React from 'react'\n\nconst MoreVertIcon = () => (\n  <svg\n    className=\"icon more-vert-icon\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    aria-hidden=\"true\"\n    role=\"presentation\"\n  >\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path\n      d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n      className=\"fill\"\n    />\n  </svg>\n)\n\nexport default MoreVertIcon\n","import React from 'react'\nimport './MenuButton.scss'\n\ninterface MenuItemProps {\n  text: string\n  onClick: () => void\n}\n\ninterface MenuButtonProps {\n  className: string\n  buttonContent: React.ReactNode\n  items: Array<MenuItemProps>\n  disabled: boolean\n}\n\ninterface MenuButtonState {\n  open: boolean\n}\n\nclass MenuButton extends React.Component<MenuButtonProps, MenuButtonState> {\n  public readonly state = { open: false }\n  private containerElement!: HTMLDivElement\n\n  public componentDidMount() {\n    this.containerElement.addEventListener('mousedown', this.handleContainerMouseDown)\n    document.addEventListener('mousedown', this.handleDocumentMouseDown, true)\n    document.addEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public componentWillUnmount() {\n    this.containerElement.removeEventListener('mousedown', this.handleContainerMouseDown)\n    document.removeEventListener('mousedown', this.handleDocumentMouseDown, true)\n    document.removeEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public render() {\n    const { className, buttonContent, items } = this.props\n    const { open } = this.state\n    return (\n      <div\n        className={'menu-button-container' + (className ? ' ' + className : '') + (open ? ' open' : '')}\n        ref={e => (this.containerElement = e as HTMLDivElement)}\n      >\n        <button className=\"menu-button\" onClick={this.handleButtonClick}>\n          {buttonContent}\n        </button>\n        {open && items.length > 0 && (\n          <div className=\"menu-anchor\">\n            <div className=\"menu-content\">\n              {items.map(item => (\n                <button\n                  key={item.text}\n                  className=\"menu-item\"\n                  role=\"button\"\n                  onClick={() => this.handleItemClick(item.onClick)}\n                >\n                  {item.text}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  private handleButtonClick = () => {\n    if (!this.props.disabled) {\n      this.setState({ open: !this.state.open })\n    }\n  }\n\n  private handleContainerMouseDown = (e: MouseEvent) => {\n    if (this.state.open) {\n      e.stopPropagation()\n    }\n  }\n\n  private handleDocumentMouseDown = (e: MouseEvent) => {\n    if (this.state.open && e.target instanceof Node && !this.containerElement.contains(e.target)) {\n      this.setState({ open: false })\n    }\n  }\n\n  private handleDocumentKeyDown = (e: KeyboardEvent) => {\n    if (this.state.open && (e.key === 'Escape' || e.keyCode === 27)) {\n      this.setState({ open: false })\n    }\n  }\n\n  private handleItemClick = (itemOnClick: () => void) => {\n    this.setState({ open: false })\n    itemOnClick()\n  }\n}\n\nexport default MenuButton\n","import React from 'react'\nimport MoreVertIcon from '../../assets/icons/MoreVertIcon'\nimport MenuButton from '../widgets/MenuButton'\nimport './TaskMenuButton.scss'\n\ninterface TaskMenuButtonProps {\n  startEditing: () => void\n  remove: () => void\n  disabled: boolean\n}\n\nconst TaskMenuButton: React.FunctionComponent<TaskMenuButtonProps> = ({ startEditing, remove, disabled }) => (\n  <MenuButton\n    className=\"task-menu-button\"\n    buttonContent={<MoreVertIcon />}\n    items={[\n      { text: 'Edit', onClick: startEditing },\n      { text: 'Assign', onClick: () => {} },\n      { text: 'Tags', onClick: () => {} },\n      { text: 'Delete', onClick: remove },\n    ]}\n    disabled={disabled}\n  />\n)\n\nexport default TaskMenuButton\n","import React from 'react'\nimport TaskMenuButton from './TaskMenuButton'\nimport { Task } from '../../state'\nimport './Task.scss'\n\nconst FADE_IN_DURATION = 260\nconst FADE_OUT_DURATION = FADE_IN_DURATION + 120\n\ninterface TaskProps {\n  task: Task\n  elementRef: any\n  contentRef: any\n  dragged: boolean\n  onChange: (task: Task) => void\n  remove: () => void\n}\n\ninterface TaskState {\n  visible: boolean\n  removing: boolean\n  height: number | null\n}\n\nclass TaskComponent extends React.PureComponent<TaskProps, TaskState> {\n  public readonly state = { visible: false, removing: false, height: 0 }\n  private rootElement!: HTMLDivElement\n  private textareaElement: HTMLTextAreaElement | null = null\n\n  public componentDidMount() {\n    if (this.props.task.creating) {\n      this.fadeIn()\n    }\n    document.addEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleDocumentKeyDown, true)\n  }\n\n  public render() {\n    const { task, elementRef, contentRef, dragged } = this.props\n    const { visible, removing, height } = this.state\n    const style = (task.creating || removing) && height !== null ? { height } : undefined\n    this.checkJustDropped()\n    return (\n      <div\n        className={\n          'task-container' +\n          (removing ? ' removing' : '') +\n          (visible ? ' visible' : '') +\n          (task.creating ? ' creating' : '') +\n          (task.editing ? ' editing' : '') +\n          (task.justDropped ? ' just-dropped' : '')\n        }\n        style={style}\n        ref={e => {\n          this.rootElement = e as HTMLDivElement\n          elementRef(e)\n        }}\n      >\n        <div className=\"task\">\n          <div className=\"task-content\" ref={contentRef}>\n            <div className=\"top-container\">\n              <div className=\"text-container\">\n                <div className=\"description\">{task.description}</div>\n                {task.editing && (\n                  <textarea\n                    spellCheck={false}\n                    value={task.description}\n                    onChange={this.handleTextChange}\n                    onKeyPress={this.handleKeyPress}\n                    ref={this.handleTextarea}\n                    onBlur={this.cancelEdit}\n                  />\n                )}\n              </div>\n              <TaskMenuButton\n                startEditing={this.startEditing}\n                remove={this.fadeOut}\n                disabled={dragged || !!task.editing}\n              />\n            </div>\n            <div className=\"avatar-container\">{task.userLabel && <div className={'avatar ' + task.userLabel} />}</div>\n            <div className=\"labels\">\n              {task.labels.map(l => (\n                <div key={l.name} className={'label ' + l.color}>\n                  {l.name}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  private handleTextarea = (e: HTMLTextAreaElement | null) => {\n    if (this.textareaElement) {\n      this.textareaElement.removeEventListener('mousedown', this.stopPropagation)\n      this.textareaElement.removeEventListener('mouseup', this.stopPropagation)\n    }\n    this.textareaElement = e\n    if (this.textareaElement) {\n      this.textareaElement.addEventListener('mousedown', this.stopPropagation)\n      this.textareaElement.addEventListener('mouseup', this.stopPropagation)\n      if (!this.props.task.creating) {\n        this.textareaElement.focus()\n      }\n    }\n  }\n\n  private handleTextChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const { task, onChange } = this.props\n    const value = e.target.value\n    const description = value.endsWith('\\n') ? value.substring(0, value.length - 1) : value\n    onChange({ ...task, description })\n  }\n\n  private handleKeyPress = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' || e.keyCode === 13) {\n      const { task, onChange } = this.props\n      onChange({ ...task, editing: false, creating: false })\n    }\n  }\n\n  private handleDocumentKeyDown = (e: KeyboardEvent) => {\n    if ((e.key === 'Escape' || e.keyCode === 27) && this.props.task.editing && !this.state.height) {\n      this.cancelEdit()\n    }\n  }\n\n  private cancelEdit = () => {\n    const { task, onChange } = this.props\n    const { removing } = this.state\n    if (task.creating && !removing) {\n      if (!task.description && !task.userLabel && task.labels.length === 0) {\n        this.fadeOut()\n      } else if (task.editing) {\n        onChange({ ...task, editing: false, creating: false })\n      }\n    } else if (task.editing && !removing) {\n      onChange({ ...task, editing: false })\n    }\n  }\n\n  private fadeIn = () => {\n    setTimeout(() => this.setState({ visible: true, height: this.rootElement.scrollHeight }), 1)\n    setTimeout(() => {\n      if (this.textareaElement) {\n        this.textareaElement.focus()\n      }\n      this.setState({ height: null })\n    }, FADE_IN_DURATION)\n  }\n\n  private fadeOut = () => {\n    this.setState({ height: this.rootElement.clientHeight, removing: true })\n    setTimeout(() => {\n      this.setState({ visible: false, height: 0 })\n      setTimeout(() => {\n        this.props.remove()\n      }, FADE_OUT_DURATION)\n    }, 50)\n  }\n\n  private startEditing = () => {\n    const { task, onChange } = this.props\n    if (!task.editing) {\n      onChange({ ...task, editing: true })\n    }\n  }\n\n  private checkJustDropped = () => {\n    const { task, onChange } = this.props\n    if (task.justDropped) {\n      setTimeout(() => onChange({ ...task, justDropped: false }), 100)\n    }\n  }\n\n  private stopPropagation = (e: MouseEvent) => e.stopPropagation()\n}\n\nexport default TaskComponent\n","import React from 'react'\nimport { Task } from '../../state'\nimport TaskComponent from './Task'\n\ninterface TaskDraggableProps {\n  task: Task\n  taskIndex: number\n  columnIndex: number\n  dragged?: boolean\n  onMouseDown: (\n    mouseX: number,\n    mouseY: number,\n    draggedElement: HTMLDivElement,\n    taskId: string,\n    taskIndex: number,\n    columnIndex: number\n  ) => void\n  onMouseMove: (mouseX: number, mouseY: number) => void\n  onMouseUp: () => void\n  onChange: (columnIndex: number, taskIndex: number, task: Task) => void\n  remove: (columnIndex: number, taskIndex: number) => void\n}\n\nclass TaskDraggable extends React.PureComponent<TaskDraggableProps> {\n  private rootElement!: HTMLDivElement\n  private contentElement!: HTMLDivElement\n\n  public componentDidMount() {\n    this.contentElement.addEventListener('mousedown', this.handleMouseDown)\n    this.contentElement.addEventListener('touchstart', this.handleTouchStart)\n    this.contentElement.addEventListener('mouseup', this.handleTaskMouseUp)\n    document.addEventListener('mousemove', this.handleMouseMove)\n    document.addEventListener('touchmove', this.handleTouchMove)\n    window.addEventListener('mouseup', this.handleMouseUp)\n    window.addEventListener('blur', this.handleMouseUp)\n    window.addEventListener('touchend', this.handleMouseUp)\n  }\n\n  public componentWillUnmount() {\n    this.contentElement.removeEventListener('mousedown', this.handleMouseDown)\n    this.contentElement.removeEventListener('touchstart', this.handleTouchStart)\n    this.contentElement.removeEventListener('mouseup', this.handleTaskMouseUp)\n    document.removeEventListener('mousemove', this.handleMouseMove)\n    document.removeEventListener('touchmove', this.handleTouchMove)\n    window.removeEventListener('mouseup', this.handleMouseUp)\n    window.removeEventListener('blur', this.handleMouseUp)\n    window.removeEventListener('touchend', this.handleMouseUp)\n  }\n\n  public render() {\n    return (\n      <TaskComponent\n        task={this.props.task}\n        elementRef={this.handleRef}\n        contentRef={this.handleContentRef}\n        dragged={!!this.props.dragged}\n        onChange={this.handleChange}\n        remove={this.handleRemove}\n      />\n    )\n  }\n\n  private handleMouseDown = (e: MouseEvent) => {\n    if (e.button === 0) {\n      if (e.cancelable) {\n        e.preventDefault()\n      }\n      if (!this.props.task.editing) {\n        this.props.onMouseDown(\n          e.clientX,\n          e.clientY,\n          this.rootElement,\n          this.props.task.id,\n          this.props.taskIndex,\n          this.props.columnIndex\n        )\n      }\n    } else {\n      this.handleMouseUp()\n    }\n  }\n\n  private handleTouchStart = (e: TouchEvent) => {\n    if (e.touches.length === 1) {\n      if (e.cancelable) {\n        e.preventDefault()\n      }\n      this.props.onMouseDown(\n        e.touches[0].clientX,\n        e.touches[0].clientY,\n        this.rootElement,\n        this.props.task.id,\n        this.props.taskIndex,\n        this.props.columnIndex\n      )\n    }\n  }\n\n  private handleMouseMove = (e: MouseEvent) => {\n    this.props.onMouseMove(e.clientX, e.clientY)\n  }\n\n  private handleTouchMove = (e: TouchEvent) => {\n    if (e.touches.length === 1) {\n      this.props.onMouseMove(e.touches[0].clientX, e.touches[0].clientY)\n    }\n  }\n\n  private handleMouseUp = () => this.props.onMouseUp()\n\n  private handleRef = (e: HTMLDivElement | null) => (this.rootElement = e as HTMLDivElement)\n\n  private handleContentRef = (e: HTMLDivElement | null) => (this.contentElement = e as HTMLDivElement)\n\n  private handleChange = (task: Task) => {\n    this.props.onChange(this.props.columnIndex, this.props.taskIndex, task)\n  }\n\n  private handleRemove = () => {\n    this.props.remove(this.props.columnIndex, this.props.taskIndex)\n  }\n\n  private handleTaskMouseUp = () => {\n    if (!this.props.task.editing) {\n      const activeElement = document.activeElement as any\n      if (activeElement) {\n        activeElement.blur()\n      }\n    }\n  }\n}\n\nexport default TaskDraggable\n","const BOARD_BOUNDS_X_INSET = 8\nconst BOARD_BOUNDS_Y_INSET = 0\nconst DRAG_START_THRESHOLD = 10\nconst HORIZONTAL_DROP_THRESHOLD = 0.5\nconst MARGIN_LEFT = 16\nconst RELEASE_TRANSITION_DURATION = 180\nconst BOARD_HEIGHT_OFFSET = 28\nconst SCROLL_THRESHOLD = 5 // Scroll if dragged task outside viewport by at least this (in px).\nconst SCROLL_RATE = 0.6 // Pixels per ms.\nconst SCROLL_ACCELERATION = 750 // Time in ms to reach scroll rate.\n\nclass DragDropHelper {\n  private mouseDown: boolean = false\n  private mouseStartX: number = 0\n  private mouseStartY: number = 0\n  private mouseX: number = 0\n  private mouseY: number = 0\n  private startX: number = 0\n  private startY: number = 0\n  private width!: number\n  private height!: number\n  private dragInProgress: boolean = false\n  private draggedElement!: HTMLDivElement\n  private boardElement!: HTMLDivElement\n  private boardWidth!: number\n  private boardHeight!: number\n  private taskId!: string\n  private taskIndex!: number\n  private columnIndex!: number\n  private columns!: Array<{ x: number; width: number }>\n  private tasks!: Array<Array<{ width: number; height: number }>>\n  private taskLists!: number[]\n  private hoveredColumnIndex?: number\n  private hoveredTaskIndex?: number\n  private scrollXAnimationDirection: number = 0\n  private scrollYAnimationDirection: number = 0\n  private scrollXAnimation?: { cancel: () => void }\n  private scrollYAnimation?: { cancel: () => void }\n  private horizontalScrollElement!: HTMLDivElement\n  private scrollXOnDragStart: number = 0\n  private scrollYOnDragStart: number = 0\n\n  private onStart!: (\n    taskId: string,\n    taskIndex: number,\n    taskHeight: number,\n    columnIndex: number,\n    hoveredColumnIndex?: number,\n    hoveredTaskIndex?: number\n  ) => void\n  private onHover!: (hoveredColumnIndex?: number, hoveredTaskIndex?: number) => void\n  private onDrop!: (hoveredColumnIndex?: number, hoveredTaskIndex?: number) => void\n  private onEnd!: () => void\n\n  public onMouseDown(\n    mouseX: number,\n    mouseY: number,\n    draggedElement: HTMLDivElement,\n    boardElement: HTMLDivElement,\n    taskId: string,\n    taskIndex: number,\n    columnIndex: number\n  ) {\n    this.clearSelection()\n    this.mouseDown = true\n    this.mouseStartX = mouseX\n    this.mouseStartY = mouseY\n    this.startX = draggedElement.offsetLeft\n    this.startY = draggedElement.offsetTop\n    this.width = draggedElement.clientWidth\n    this.height = draggedElement.clientHeight\n    this.draggedElement = draggedElement\n    this.boardElement = boardElement\n    this.boardWidth = boardElement.clientWidth\n    this.taskId = taskId\n    this.taskIndex = taskIndex\n    this.columnIndex = columnIndex\n\n    this.columns = []\n    this.tasks = []\n    this.taskLists = []\n    boardElement.childNodes.forEach((columnElement, i) => {\n      if (columnElement instanceof HTMLDivElement) {\n        this.columns.push({ x: columnElement.offsetLeft, width: columnElement.clientWidth })\n\n        this.tasks[i] = []\n        columnElement.querySelectorAll('.task-container').forEach((taskElement, j) => {\n          if (taskElement instanceof HTMLDivElement && taskElement !== draggedElement) {\n            this.tasks[i].push({ width: taskElement.clientWidth, height: taskElement.clientHeight })\n          }\n        })\n\n        const taskListElement = columnElement.querySelector('.task-list')\n        if (taskListElement instanceof HTMLDivElement) {\n          this.taskLists[i] = taskListElement.offsetTop\n        }\n      }\n    })\n    this.boardHeight = this.calculateBoardHeight()\n    this.horizontalScrollElement = document.querySelector('.task-board-overflow-container') as HTMLDivElement\n    this.scrollXOnDragStart = this.horizontalScrollElement.scrollLeft\n    this.scrollYOnDragStart = window.scrollY\n  }\n\n  public onMouseMove(mouseX: number, mouseY: number) {\n    if (this.mouseDown) {\n      this.mouseX = mouseX\n      this.mouseY = mouseY\n      const deltaX = mouseX - this.mouseStartX\n      const deltaY = mouseY - this.mouseStartY\n\n      let dragJustStarted = false\n      if (!this.dragInProgress && Math.hypot(deltaX, deltaY) > DRAG_START_THRESHOLD) {\n        this.dragInProgress = true\n        this.draggedElement.style.width = this.width + 'px'\n        this.draggedElement.style.height = this.height + 'px'\n        this.boardElement.style.minHeight = this.boardHeight + 'px'\n        dragJustStarted = true\n      }\n\n      if (this.dragInProgress) {\n        const x = this.startX + deltaX\n        const y = this.startY + deltaY\n        const viewportDeltaX = this.horizontalScrollElement.scrollLeft - this.scrollXOnDragStart\n        const viewportDeltaY = window.scrollY - this.scrollYOnDragStart\n\n        const xAdjusted = x + viewportDeltaX\n        const yAdjusted = y + viewportDeltaY\n\n        const minX = BOARD_BOUNDS_X_INSET\n        const minY = BOARD_BOUNDS_Y_INSET - 1\n        const maxX = this.boardWidth - this.width - BOARD_BOUNDS_X_INSET\n        const maxY = this.boardHeight - this.height - BOARD_BOUNDS_Y_INSET\n        const clampedX = Math.max(minX, Math.min(maxX, xAdjusted))\n        const clampedY = Math.max(minY, Math.min(maxY, yAdjusted))\n\n        this.draggedElement.style.left = clampedX + 'px'\n        this.draggedElement.style.top = clampedY + 'px'\n        this.recordHoverLocation(clampedX, yAdjusted)\n\n        if (dragJustStarted) {\n          this.onStart(\n            this.taskId,\n            this.taskIndex,\n            this.height,\n            this.columnIndex,\n            this.hoveredColumnIndex,\n            this.hoveredTaskIndex\n          )\n          this.draggedElement.classList.add('dragged')\n          this.draggedElement.classList.remove('creating')\n        } else {\n          this.onHover(this.hoveredColumnIndex, this.hoveredTaskIndex)\n        }\n\n        this.checkForScroll(xAdjusted, yAdjusted)\n      }\n    }\n  }\n\n  public endDrag() {\n    if (this.dragInProgress) {\n      this.draggedElement.classList.add('released')\n      this.draggedElement.classList.remove('dragged')\n\n      let hoverStartX: number, hoverStartY: number\n      const i = this.hoveredColumnIndex\n      const j = this.hoveredTaskIndex\n      if (i !== undefined && j !== undefined) {\n        hoverStartX = this.columns[i].x + MARGIN_LEFT\n        hoverStartY = this.tasks[i].reduce((r, t, k) => (k < j ? r + t.height : r), this.taskLists[i])\n      }\n\n      setTimeout(() => {\n        const destX = hoverStartX !== undefined ? hoverStartX : this.startX\n        const destY = hoverStartY !== undefined ? hoverStartY : this.startY\n        this.draggedElement.style.left = destX + 'px'\n        this.draggedElement.style.top = destY + 'px'\n      }, 1)\n\n      setTimeout(() => {\n        this.cleanUp()\n        this.onEnd()\n      }, RELEASE_TRANSITION_DURATION)\n\n      this.onDrop(this.hoveredColumnIndex, this.hoveredTaskIndex)\n    }\n\n    if (this.scrollXAnimation) {\n      this.scrollXAnimation.cancel()\n      this.scrollXAnimation = undefined\n    }\n    if (this.scrollYAnimation) {\n      this.scrollYAnimation.cancel()\n      this.scrollYAnimation = undefined\n    }\n    this.scrollXAnimationDirection = 0\n    this.scrollYAnimationDirection = 0\n    this.dragInProgress = false\n    this.mouseDown = false\n  }\n\n  public setOnStart(onStart: any) {\n    this.onStart = onStart\n  }\n\n  public setOnHover(onHover: any) {\n    this.onHover = onHover\n  }\n\n  public setOnDrop(onDrop: any) {\n    this.onDrop = onDrop\n  }\n\n  public setOnEnd(onEnd: any) {\n    this.onEnd = onEnd\n  }\n\n  private recordHoverLocation(x: number, y: number) {\n    const dragMidX = x + this.width / 2\n    const dragMidY = y + this.height / 2\n\n    let columnIndex\n    for (let i = 0; i < this.columns.length; i++) {\n      const column = this.columns[i]\n      const midX = column.x + column.width / 2\n      const delta = Math.abs(dragMidX - midX)\n      if (delta / column.width < HORIZONTAL_DROP_THRESHOLD) {\n        columnIndex = i\n        break\n      }\n    }\n\n    let taskIndex = 0\n    if (columnIndex !== undefined) {\n      const tasks = this.tasks[columnIndex]\n      let yOffset = this.taskLists[columnIndex]\n      for (let j = 0; j < tasks.length; j++) {\n        const task = tasks[j]\n        yOffset += task.height\n        if (dragMidY > yOffset) {\n          taskIndex = j + 1\n        }\n      }\n    }\n\n    if (columnIndex !== undefined) {\n      this.hoveredColumnIndex = columnIndex\n      this.hoveredTaskIndex = taskIndex\n    } else {\n      this.hoveredColumnIndex = undefined\n      this.hoveredTaskIndex = undefined\n    }\n  }\n\n  private cleanUp() {\n    if (this.draggedElement) {\n      this.draggedElement.classList.remove('released')\n      this.draggedElement.style.left = null\n      this.draggedElement.style.top = null\n      this.draggedElement.style.width = null\n      this.draggedElement.style.height = null\n    }\n    if (this.boardElement) {\n      this.boardElement.style.minHeight = null\n    }\n\n    this.hoveredColumnIndex = undefined\n    this.hoveredTaskIndex = undefined\n  }\n\n  private calculateBoardHeight() {\n    const maxTaskHeight = this.tasks.reduce((max, c, i) => {\n      const height = c.reduce((sum, t) => sum + t.height, 0) + this.taskLists[i]\n      return height > max ? height : max\n    }, 0)\n    const maxTaskBoardHeight = maxTaskHeight + this.draggedElement.clientHeight + BOARD_HEIGHT_OFFSET\n    return Math.max(maxTaskBoardHeight, this.boardElement.clientHeight)\n  }\n\n  private clearSelection() {\n    const selection = window.getSelection()\n    if (!selection) return\n    if (selection.empty) {\n      selection.empty()\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges()\n    }\n  }\n\n  private checkForScroll = (x: number, y: number) => {\n    const { scrollX, scrollY } = this.getScrollDirections(x, y)\n    if (scrollX !== this.scrollXAnimationDirection) {\n      if (this.scrollXAnimation) {\n        this.scrollXAnimation.cancel()\n      }\n      if (scrollX !== 0) {\n        this.scrollXAnimation = this.startScrollAnimation(false, scrollX > 0)\n      }\n      this.scrollXAnimationDirection = scrollX\n    }\n    if (scrollY !== this.scrollYAnimationDirection) {\n      if (this.scrollYAnimation) {\n        this.scrollYAnimation.cancel()\n      }\n      if (scrollY !== 0) {\n        this.scrollYAnimation = this.startScrollAnimation(true, scrollY > 0)\n      }\n      this.scrollYAnimationDirection = scrollY\n    }\n  }\n\n  private getScrollDirections = (x: number, y: number) => {\n    const r = this.boardElement.getBoundingClientRect()\n\n    let scrollX: number = 0\n    let scrollY: number = 0\n    if (r.left + x < -SCROLL_THRESHOLD) {\n      scrollX = -1\n    } else if (r.left + this.width + x > window.innerWidth + SCROLL_THRESHOLD) {\n      scrollX = 1\n    }\n\n    if (r.top + y < -SCROLL_THRESHOLD) {\n      scrollY = -1\n    } else if (r.top + this.height + y > window.innerHeight + SCROLL_THRESHOLD) {\n      scrollY = 1\n    }\n    return { scrollX, scrollY }\n  }\n\n  private startScrollAnimation(vertical: boolean, increasing: boolean) {\n    let cancelled = false\n    const initial = vertical ? window.scrollY : this.horizontalScrollElement.scrollLeft\n    let start: number\n    const step = (timestamp: number) => {\n      if (!cancelled) {\n        if (!start) start = timestamp\n        const delta = timestamp - start\n        const currentScrollRate = Math.min(Math.pow(delta / SCROLL_ACCELERATION, 2), SCROLL_RATE)\n        const newScroll = initial + delta * currentScrollRate * (increasing ? 1 : -1)\n        if (vertical) {\n          window.scrollTo(0, newScroll)\n          this.onMouseMove(this.mouseX, this.mouseY)\n        } else {\n          this.horizontalScrollElement.scrollTo(Math.min(newScroll, this.boardWidth - window.innerWidth), 0)\n          this.onMouseMove(this.mouseX, this.mouseY)\n        }\n\n        window.requestAnimationFrame(step)\n      }\n    }\n    window.requestAnimationFrame(step)\n    return { cancel: () => (cancelled = true) }\n  }\n}\n\nexport default DragDropHelper\n","import React from 'react'\nimport './Placeholder.scss'\n\ninterface PlaceholderProps {\n  height: number\n  expanded: boolean\n}\n\ninterface PlaceholderState {\n  height: number\n}\n\nclass Placeholder extends React.Component<PlaceholderProps, PlaceholderState> {\n  public readonly state = { height: this.props.expanded ? this.props.height : 0 }\n\n  public componentDidUpdate(prevProps: PlaceholderProps) {\n    if (prevProps.expanded !== this.props.expanded) {\n      this.setState({ height: this.props.expanded ? this.props.height : 0 })\n    }\n  }\n\n  public render() {\n    const { expanded } = this.props\n    const { height } = this.state\n    return (\n      <div className={'placeholder' + (expanded ? ' expanded' : '')} style={{ height }}>\n        <div className=\"placeholder-fill\" />\n      </div>\n    )\n  }\n}\n\nexport default Placeholder\n","import React from 'react'\nimport { v1 as uuid } from 'uuid'\nimport { Column, Task } from '../../state'\nimport AddIcon from '../../assets/icons/AddIcon'\nimport TaskDraggable from './TaskDraggable'\nimport TaskDragHelper from './TaskDragHelper'\nimport Placeholder from './Placeholder'\nimport './TaskBoard.scss'\n\ninterface TaskBoardProps {\n  data: Column[]\n  onChange: (data: Column[]) => void\n}\n\ninterface TaskBoardState {\n  dataSnapshot?: Column[]\n  dragState?: {\n    draggedTaskId: string\n    draggedTaskIndex: number\n    draggedTaskHeight: number\n    draggedColumnIndex: number\n    hoveredColumnIndex?: number\n    hoveredTaskIndex?: number\n  }\n  dropping: boolean\n}\n\nclass TaskBoard extends React.Component<TaskBoardProps, TaskBoardState> {\n  public readonly state: TaskBoardState = { dropping: false }\n\n  private rootElement!: HTMLDivElement\n  private dragHelper = new TaskDragHelper()\n\n  public componentDidMount() {\n    this.dragHelper.setOnStart(this.handleDragStart)\n    this.dragHelper.setOnHover(this.handleDragHover)\n    this.dragHelper.setOnDrop(this.handleDragDrop)\n    this.dragHelper.setOnEnd(this.handleDragEnd)\n  }\n\n  public render() {\n    const { data } = this.props\n    const { dataSnapshot, dragState, dropping } = this.state\n    return (\n      <div className={'task-board' + (dropping ? ' dropping' : '')} ref={e => (this.rootElement = e as HTMLDivElement)}>\n        {(dataSnapshot || data).map((c, i) => {\n          const columnHovered = dragState && dragState.hoveredColumnIndex === i\n          const columnCreating = c.tasks.some(t => !!t.creating)\n          return (\n            <div key={c.id} className=\"column\">\n              <h2>{c.label}</h2>\n              <button className=\"add-button raised\" onClick={() => this.addTask(i)} disabled={columnCreating}>\n                <AddIcon />\n              </button>\n              <div className=\"task-list\">\n                {dragState && (\n                  <Placeholder\n                    key={'hover-placeholder-0'}\n                    height={dragState.draggedTaskHeight}\n                    expanded={!!columnHovered && dragState.hoveredTaskIndex === 0}\n                  />\n                )}\n                {c.tasks.map((t, j) => {\n                  let dragged, hoveredAfter\n                  if (dragState) {\n                    dragged = dragState.draggedColumnIndex === i && dragState.draggedTaskId === t.id\n                    if (columnHovered) {\n                      if (\n                        dragState.draggedColumnIndex === i &&\n                        dragState.draggedTaskIndex < dragState.hoveredTaskIndex!\n                      ) {\n                        hoveredAfter = dragState.hoveredTaskIndex === j\n                      } else {\n                        hoveredAfter = dragState.hoveredTaskIndex === j + 1\n                      }\n                    }\n                  }\n                  return (\n                    <React.Fragment key={t.id}>\n                      <TaskDraggable\n                        key={t.id}\n                        task={t}\n                        taskIndex={j}\n                        columnIndex={i}\n                        dragged={dragged}\n                        onMouseDown={this.handleMouseDown}\n                        onMouseMove={this.handleMouseMove}\n                        onMouseUp={this.handleMouseUp}\n                        onChange={this.updateTask}\n                        remove={this.removeTask}\n                      />\n                      {dragState && t.id !== dragState.draggedTaskId && (\n                        <Placeholder\n                          key={'hover-placeholder-' + (j + 1)}\n                          height={dragState.draggedTaskHeight}\n                          expanded={!!hoveredAfter}\n                        />\n                      )}\n                    </React.Fragment>\n                  )\n                })}\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  private handleMouseDown = (\n    mouseX: number,\n    mouseY: number,\n    draggedElement: HTMLDivElement,\n    taskId: string,\n    taskIndex: number,\n    columnIndex: number\n  ) => {\n    this.dragHelper.onMouseDown(mouseX, mouseY, draggedElement, this.rootElement, taskId, taskIndex, columnIndex)\n  }\n\n  private handleMouseMove = (mouseX: number, mouseY: number) => {\n    this.dragHelper.onMouseMove(mouseX, mouseY)\n  }\n\n  private handleMouseUp = () => {\n    this.dragHelper.endDrag()\n  }\n\n  private handleDragStart = (\n    draggedTaskId: string,\n    draggedTaskIndex: number,\n    draggedTaskHeight: number,\n    draggedColumnIndex: number,\n    hoveredColumnIndex: number,\n    hoveredTaskIndex: number\n  ) => {\n    this.stopEdits(draggedColumnIndex, draggedTaskIndex)\n    this.setState({\n      dragState: {\n        draggedTaskId,\n        draggedTaskIndex,\n        draggedTaskHeight,\n        draggedColumnIndex,\n        hoveredColumnIndex,\n        hoveredTaskIndex,\n      },\n      dataSnapshot: this.props.data,\n    })\n  }\n\n  private handleDragHover = (hoveredColumnIndex?: number, hoveredTaskIndex?: number) => {\n    const { dragState } = this.state\n    if (hoveredColumnIndex !== dragState!.hoveredColumnIndex || hoveredTaskIndex !== dragState!.hoveredTaskIndex) {\n      this.setState({ dragState: { ...dragState!, hoveredColumnIndex, hoveredTaskIndex } })\n    }\n  }\n\n  private handleDragDrop = (columnIndex?: number, taskIndex?: number) => {\n    this.setState({ dropping: true })\n    if (columnIndex !== undefined && taskIndex !== undefined) {\n      const { draggedColumnIndex, draggedTaskIndex } = this.state.dragState!\n      if (draggedColumnIndex !== columnIndex || draggedTaskIndex !== taskIndex) {\n        this.notifyChange(draggedColumnIndex, draggedTaskIndex, columnIndex, taskIndex, true)\n      }\n    }\n  }\n\n  private handleDragEnd = () => {\n    this.setState({ dataSnapshot: undefined, dragState: undefined, dropping: false })\n  }\n\n  // Change position from source (i, j) to destination (k, l)\n  private notifyChange(i: number, j: number, k: number, l: number, justDropped?: boolean) {\n    const newData = [...this.props.data]\n    if (i === k) {\n      const tasks = [...newData[i].tasks]\n      const droppedTask = tasks.splice(j, 1)[0]\n      const newTask = justDropped ? { ...droppedTask, justDropped } : droppedTask\n\n      tasks.splice(l, 0, newTask)\n\n      newData[i] = { ...newData[i], tasks }\n    } else {\n      const sourceTasks = [...newData[i].tasks]\n      const destinationTasks = [...newData[k].tasks]\n      const droppedTask = sourceTasks.splice(j, 1)[0]\n      const newTask = justDropped ? { ...droppedTask, justDropped } : droppedTask\n\n      destinationTasks.splice(l, 0, newTask)\n\n      newData[i] = { ...newData[i], tasks: sourceTasks }\n      newData[k] = { ...newData[k], tasks: destinationTasks }\n    }\n    this.props.onChange(newData)\n  }\n\n  private addTask = (i: number) => {\n    const newTask = { id: uuid(), description: '', labels: [], creating: true, editing: true }\n    const newData = [...this.props.data]\n    const newColumn = { ...newData[i], tasks: [newTask, ...newData[i].tasks] }\n    newData[i] = newColumn\n\n    this.props.onChange(newData)\n  }\n\n  private removeTask = (i: number, j: number) => {\n    const newData = [...this.props.data]\n    newData[i].tasks = [...newData[i].tasks]\n    newData[i].tasks.splice(j, 1)\n    this.props.onChange(newData)\n  }\n\n  private stopEdits = (i: number, j: number) => {\n    const task = this.props.data[i].tasks[j]\n    if (task.creating || task.editing) {\n      this.updateTask(i, j, { ...task, creating: false, editing: false })\n    }\n  }\n\n  private updateTask = (i: number, j: number, newTask: Task) => {\n    const newData = [...this.props.data]\n    newData[i].tasks = [...newData[i].tasks]\n    newData[i].tasks[j] = newTask\n    this.props.onChange(newData)\n  }\n}\n\nexport default TaskBoard\n","import React from 'react'\nimport { isIE } from '../../utils/utils'\nimport './BrowserCheck.scss'\n\nconst browserOk = !isIE()\n\nconst BrowserCheck: React.FunctionComponent<{}> = ({ children }) =>\n  browserOk ? (\n    <React.Fragment>{children}</React.Fragment>\n  ) : (\n    <div className=\"unsupported-browser\">This page does not run on Internet Explorer.</div>\n  )\n\nexport default BrowserCheck\n","export const isIE = () => {\n  const agent = window.navigator.userAgent\n  return agent.match(/(MSIE|Trident)/) && !agent.match(/Edge/)\n}\n","import { State } from '.'\n\nexport const initialState: State = {\n  users: [{ id: '1', label: 'sorcerio' }, { id: '2', label: 'bean' }, { id: '3', label: 'elfo' }],\n  columns: [\n    {\n      id: 'c1',\n      label: 'Backlog',\n      tasks: [\n        {\n          id: 't1',\n          description: 'Font size is too small in registration form',\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Low', color: 'green' }, { name: 'All', color: 'yellow' }],\n        },\n        {\n          id: 't2',\n          description: 'Local storage is not cleaned up on logout',\n          userLabel: 'bean',\n          labels: [{ name: 'Medium', color: 'orange' }, { name: 'Chrome', color: 'lime' }],\n        },\n        {\n          id: 't3',\n          description: \"Login doesn't work if third-party cookies are disabled\",\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Low', color: 'green' }, { name: 'IE', color: 'blue' }],\n        },\n      ],\n    },\n    {\n      id: 'c2',\n      label: 'Ready',\n      tasks: [\n        {\n          id: 't4',\n          description: 'Items are missing from search results when filtering by date',\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Medium', color: 'orange' }, { name: 'All', color: 'yellow' }],\n        },\n        {\n          id: 't5',\n          description: 'Link clicks cause a full page reload',\n          userLabel: 'sorcerio',\n          labels: [{ name: 'Medium', color: 'orange' }],\n        },\n      ],\n    },\n    {\n      id: 'c3',\n      label: 'In Progress',\n      tasks: [\n        {\n          id: 't6',\n          description: 'Apple Pay integration is broken on iOS',\n          userLabel: 'bean',\n          labels: [{ name: 'High', color: 'red' }],\n        },\n      ],\n    },\n    { id: 'c4', label: 'Done', tasks: [] },\n  ],\n}\n","import React from 'react'\nimport WebFont from 'webfontloader'\nimport Header from '../header/Header'\nimport TaskBoard from '../board/TaskBoard'\nimport BrowserCheck from './BrowserCheck'\nimport { Column, initialState } from '../../state'\nimport './App.scss'\n\nWebFont.load({\n  google: {\n    families: ['Lato:400,700,900'],\n  },\n})\n\ninterface AppState {\n  data: Column[]\n}\n\nclass App extends React.Component<{}, AppState> {\n  public readonly state: AppState = { data: initialState.columns }\n\n  public render() {\n    return (\n      <BrowserCheck>\n        <Header users={initialState.users} />\n        <div className=\"task-board-overflow-container\">\n          <TaskBoard data={this.state.data} onChange={this.handleChange} />\n        </div>\n      </BrowserCheck>\n    )\n  }\n\n  private handleChange = (data: Column[]) => {\n    this.setState({ data })\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/app/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}