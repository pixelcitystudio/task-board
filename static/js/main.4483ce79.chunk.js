(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(9),s=n.n(i),r=n(1),l=n(2),d=n(4),h=n(3),c=n(5),u=n(10),g=n.n(u),m=(n(17),function(e){var t=e.users;return o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,o.a.createElement("a",{href:"https://www.github.com/rmfisher/task-board"},"Bug Tracking")),o.a.createElement("div",{className:"avatars"},t.map(function(e){return o.a.createElement("div",{key:e.id,className:"avatar "+e.label})})))}),v=n(6),p=n(7),f=function(){return o.a.createElement("svg",{className:"icon",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),o.a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",className:"fill"}))},k=(n(18),function(e){var t=e.task,n=e.rootRef;return o.a.createElement("div",{className:"task",ref:n},o.a.createElement("div",{className:"task-content"},o.a.createElement("div",{className:"description"},t.description),o.a.createElement("div",{className:"avatar "+t.userLabel}),o.a.createElement("div",{className:"labels"},t.labels.map(function(e){return o.a.createElement("div",{key:e.name,className:"label "+e.color},e.name)}))))}),E=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).rootElement=void 0,n.handleMouseDown=function(e){0===e.button?(e.cancelable&&e.preventDefault(),n.props.onMouseDown(e.clientX,e.clientY,n.rootElement,n.props.task.id,n.props.taskIndex,n.props.categoryIndex)):n.handleMouseUp()},n.handleTouchStart=function(e){1===e.touches.length&&(e.cancelable&&e.preventDefault(),n.props.onMouseDown(e.touches[0].clientX,e.touches[0].clientY,n.rootElement,n.props.task.id,n.props.taskIndex,n.props.categoryIndex))},n.handleMouseMove=function(e){n.props.onMouseMove(e.clientX,e.clientY)},n.handleTouchMove=function(e){1===e.touches.length&&n.props.onMouseMove(e.touches[0].clientX,e.touches[0].clientY)},n.handleMouseUp=function(){n.props.onMouseUp()},n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.rootElement.addEventListener("mousedown",this.handleMouseDown),this.rootElement.addEventListener("touchstart",this.handleTouchStart),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("blur",this.handleMouseUp),window.addEventListener("touchend",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.rootElement.removeEventListener("mousedown",this.handleMouseDown),this.rootElement.removeEventListener("touchstart",this.handleTouchStart),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("blur",this.handleMouseUp),window.removeEventListener("touchend",this.handleMouseUp)}},{key:"render",value:function(){var e=this;return o.a.createElement(k,{task:this.props.task,rootRef:function(t){return e.rootElement=t}})}}]),t}(o.a.Component),b=8,w=5,y=function(){function e(){var t=this;Object(r.a)(this,e),this.mouseDown=!1,this.mouseStartX=0,this.mouseStartY=0,this.mouseX=0,this.mouseY=0,this.startX=0,this.startY=0,this.width=void 0,this.height=void 0,this.dragInProgress=!1,this.draggedElement=void 0,this.boardElement=void 0,this.boardWidth=void 0,this.boardHeight=void 0,this.taskId=void 0,this.taskIndex=void 0,this.categoryIndex=void 0,this.categories=void 0,this.tasks=void 0,this.taskLists=void 0,this.hoveredCategoryIndex=void 0,this.hoveredTaskIndex=void 0,this.scrollXAnimationDirection=0,this.scrollYAnimationDirection=0,this.scrollXAnimation=void 0,this.scrollYAnimation=void 0,this.horizontalScrollElement=void 0,this.scrollXOnDragStart=0,this.scrollYOnDragStart=0,this.onStart=void 0,this.onHover=void 0,this.onDrop=void 0,this.onEnd=void 0,this.checkForScroll=function(e,n){var a=t.getScrollDirections(e,n),o=a.scrollX,i=a.scrollY;o!==t.scrollXAnimationDirection&&(t.scrollXAnimation&&t.scrollXAnimation.cancel(),0!==o&&(t.scrollXAnimation=t.startScrollAnimation(!1,o>0)),t.scrollXAnimationDirection=o),i!==t.scrollYAnimationDirection&&(t.scrollYAnimation&&t.scrollYAnimation.cancel(),0!==i&&(t.scrollYAnimation=t.startScrollAnimation(!0,i>0)),t.scrollYAnimationDirection=i)},this.getScrollDirections=function(e,n){var a=t.boardElement.getBoundingClientRect(),o=0,i=0;return a.left+e<-w?o=-1:a.left+t.width+e>window.innerWidth+w&&(o=1),a.top+n+b<-w?i=-1:a.top+t.height+n-b>window.innerHeight+w&&(i=1),{scrollX:o,scrollY:i}}}return Object(l.a)(e,[{key:"onMouseDown",value:function(e,t,n,a,o,i,s){var r=this;this.clearSelection(),this.mouseDown=!0,this.mouseStartX=e,this.mouseStartY=t,this.startX=n.offsetLeft,this.startY=n.offsetTop,this.width=n.clientWidth,this.height=n.clientHeight,this.draggedElement=n,this.boardElement=a,this.boardWidth=a.clientWidth,this.taskId=o,this.taskIndex=i,this.categoryIndex=s,this.categories=[],this.tasks=[],this.taskLists=[],a.childNodes.forEach(function(e,t){if(e instanceof HTMLDivElement){r.categories.push({x:e.offsetLeft,width:e.clientWidth}),r.tasks[t]=[],e.querySelectorAll(".task").forEach(function(e,a){e instanceof HTMLDivElement&&e!==n&&r.tasks[t].push({width:e.clientWidth,height:e.clientHeight})});var a=e.querySelector(".task-list");a instanceof HTMLDivElement&&(r.taskLists[t]=a.offsetTop)}}),this.boardHeight=this.calculateBoardHeight(),this.horizontalScrollElement=document.querySelector(".task-board-overflow-container"),this.scrollXOnDragStart=this.horizontalScrollElement.scrollLeft,this.scrollYOnDragStart=window.scrollY}},{key:"onMouseMove",value:function(e,t){if(this.mouseDown){this.mouseX=e,this.mouseY=t;var n=e-this.mouseStartX,a=t-this.mouseStartY,o=!1;if(!this.dragInProgress&&Math.hypot(n,a)>10&&(this.dragInProgress=!0,this.draggedElement.style.width=this.width+"px",this.draggedElement.style.height=this.height+"px",this.boardElement.style.minHeight=this.boardHeight+"px",o=!0),this.dragInProgress){var i=this.startX+n,s=this.startY+a,r=i+(this.horizontalScrollElement.scrollLeft-this.scrollXOnDragStart),l=s+(window.scrollY-this.scrollYOnDragStart),d=this.boardWidth-this.width-8,h=this.boardHeight-this.height-0,c=Math.max(8,Math.min(d,r)),u=Math.max(-1,Math.min(h,l));this.draggedElement.style.left=c+"px",this.draggedElement.style.top=u+"px",this.recordHoverLocation(c,l),o?(this.onStart(this.taskId,this.taskIndex,this.height,this.categoryIndex,this.hoveredCategoryIndex,this.hoveredTaskIndex),this.draggedElement.classList.add("dragged")):this.onHover(this.hoveredCategoryIndex,this.hoveredTaskIndex),this.checkForScroll(r,l)}}}},{key:"endDrag",value:function(){var e=this;if(this.dragInProgress){var t,n;this.draggedElement.classList.add("released"),this.draggedElement.classList.remove("dragged");var a=this.hoveredCategoryIndex,o=this.hoveredTaskIndex;void 0!==a&&void 0!==o&&(t=this.categories[a].x+16,n=this.tasks[a].reduce(function(e,t,n){return n<o?e+t.height:e},this.taskLists[a])),setTimeout(function(){var a=void 0!==t?t:e.startX,o=void 0!==n?n:e.startY;e.draggedElement.style.left=a+"px",e.draggedElement.style.top=o+"px"},1),setTimeout(function(){e.cleanUp(),e.onEnd()},180),this.onDrop(this.hoveredCategoryIndex,this.hoveredTaskIndex)}this.scrollXAnimation&&(this.scrollXAnimation.cancel(),this.scrollXAnimation=void 0),this.scrollYAnimation&&(this.scrollYAnimation.cancel(),this.scrollYAnimation=void 0),this.scrollXAnimationDirection=0,this.scrollYAnimationDirection=0,this.dragInProgress=!1,this.mouseDown=!1}},{key:"setOnStart",value:function(e){this.onStart=e}},{key:"setOnHover",value:function(e){this.onHover=e}},{key:"setOnDrop",value:function(e){this.onDrop=e}},{key:"setOnEnd",value:function(e){this.onEnd=e}},{key:"recordHoverLocation",value:function(e,t){for(var n,a=e+this.width/2,o=t+this.height/2,i=0;i<this.categories.length;i++){var s=this.categories[i],r=s.x+s.width/2;if(Math.abs(a-r)/s.width<.5){n=i;break}}var l=0;if(void 0!==n)for(var d=this.tasks[n],h=this.taskLists[n],c=0;c<d.length;c++){o>(h+=d[c].height)&&(l=c+1)}void 0!==n?(this.hoveredCategoryIndex=n,this.hoveredTaskIndex=l):(this.hoveredCategoryIndex=void 0,this.hoveredTaskIndex=void 0)}},{key:"cleanUp",value:function(){this.draggedElement&&(this.draggedElement.classList.remove("released"),this.draggedElement.style.left=null,this.draggedElement.style.top=null,this.draggedElement.style.width=null,this.draggedElement.style.height=null),this.boardElement&&(this.boardElement.style.minHeight=null),this.hoveredCategoryIndex=void 0,this.hoveredTaskIndex=void 0}},{key:"calculateBoardHeight",value:function(){var e=this,t=this.tasks.reduce(function(t,n,a){var o=n.reduce(function(e,t){return e+t.height},0)+e.taskLists[a];return o>t?o:t},0)+this.draggedElement.clientHeight+28;return Math.max(t,this.boardElement.clientHeight)}},{key:"clearSelection",value:function(){var e=window.getSelection();e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}},{key:"startScrollAnimation",value:function(e,t){var n,a=this,o=!1,i=e?window.scrollY:this.horizontalScrollElement.scrollLeft;return window.requestAnimationFrame(function s(r){if(!o){n||(n=r);var l=r-n,d=Math.min(Math.pow(l/750,2),.6),h=i+l*d*(t?1:-1);e?(window.scrollTo(0,h),a.onMouseMove(a.mouseX,a.mouseY)):(a.horizontalScrollElement.scrollTo(Math.min(h,a.boardWidth-window.innerWidth),0),a.onMouseMove(a.mouseX,a.mouseY)),window.requestAnimationFrame(s)}}),{cancel:function(){return o=!0}}}}]),e}(),x=(n(19),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={height:n.props.expanded?n.props.height:0},n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.expanded!==this.props.expanded&&this.setState({height:this.props.expanded?this.props.height:0})}},{key:"render",value:function(){var e=this.props.expanded,t=this.state.height;return o.a.createElement("div",{className:"placeholder"+(e?" expanded":""),style:{height:t}},o.a.createElement("div",{className:"placeholder-fill"}))}}]),t}(o.a.Component)),M=(n(20),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={dropping:!1},n.rootElement=void 0,n.dragHelper=new y,n.handleMouseDown=function(e,t,a,o,i,s){n.dragHelper.onMouseDown(e,t,a,n.rootElement,o,i,s)},n.handleMouseMove=function(e,t){n.dragHelper.onMouseMove(e,t)},n.handleMouseUp=function(){n.dragHelper.endDrag()},n.handleDragStart=function(e,t,a,o,i,s){n.setState({dragState:{draggedTaskId:e,draggedTaskIndex:t,draggedTaskHeight:a,draggedCategoryIndex:o,hoveredCategoryIndex:i,hoveredTaskIndex:s},dataSnapshot:n.props.data})},n.handleDragHover=function(e,t){var a=n.state.dragState;e===a.hoveredCategoryIndex&&t===a.hoveredTaskIndex||n.setState({dragState:Object(p.a)({},a,{hoveredCategoryIndex:e,hoveredTaskIndex:t})})},n.handleDragDrop=function(e,t){if(n.setState({dropping:!0}),void 0!==e&&void 0!==t){var a=n.state.dragState,o=a.draggedCategoryIndex,i=a.draggedTaskIndex;o===e&&i===t||n.notifyChange(o,i,e,t)}},n.handleDragEnd=function(){n.setState({dataSnapshot:void 0,dragState:void 0,dropping:!1})},n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.dragHelper.setOnStart(this.handleDragStart),this.dragHelper.setOnHover(this.handleDragHover),this.dragHelper.setOnDrop(this.handleDragDrop),this.dragHelper.setOnEnd(this.handleDragEnd)}},{key:"render",value:function(){var e=this,t=this.props.data,n=this.state,a=n.dataSnapshot,i=n.dragState,s=n.dropping;return o.a.createElement("div",{className:"task-board"+(s?" dropping":""),ref:function(t){return e.rootElement=t}},(a||t).map(function(t,n){var a=i&&i.hoveredCategoryIndex===n;return o.a.createElement("div",{key:t.id,className:"category"},o.a.createElement("h2",null,t.label),o.a.createElement("button",{className:"add-button",disabled:!0},o.a.createElement(f,null)),o.a.createElement("div",{className:"task-list"},i&&o.a.createElement(x,{key:"hover-placeholder-0",height:i.draggedTaskHeight,expanded:!!a&&0===i.hoveredTaskIndex}),t.tasks.map(function(t,s){var r,l;return i&&(r=i.draggedCategoryIndex===n&&i.draggedTaskId===t.id,a&&(l=i.draggedCategoryIndex===n&&i.draggedTaskIndex<i.hoveredTaskIndex?i.hoveredTaskIndex===s:i.hoveredTaskIndex===s+1)),o.a.createElement(o.a.Fragment,{key:t.id},o.a.createElement(E,{key:t.id,task:t,taskIndex:s,categoryIndex:n,dragged:r,onMouseDown:e.handleMouseDown,onMouseMove:e.handleMouseMove,onMouseUp:e.handleMouseUp}),i&&t.id!==i.draggedTaskId&&o.a.createElement(x,{key:"hover-placeholder-"+(s+1),height:i.draggedTaskHeight,expanded:!!l}))})))}))}},{key:"notifyChange",value:function(e,t,n,a){var o=Object(v.a)(this.props.data);if(e===n){var i=Object(v.a)(o[e].tasks);i.splice(a,0,i.splice(t,1)[0]),o[e]=Object(p.a)({},o[e],{tasks:i})}else{var s=Object(v.a)(o[e].tasks),r=Object(v.a)(o[n].tasks);r.splice(a,0,s.splice(t,1)[0]),o[e]=Object(p.a)({},o[e],{tasks:s}),o[n]=Object(p.a)({},o[n],{tasks:r})}this.props.onChange(o)}}]),t}(o.a.Component)),I=(n(21),!function(){var e=window.navigator.userAgent;return e.match(/(MSIE|Trident)/)&&!e.match(/Edge/)}()),S=function(e){var t=e.children;return I?o.a.createElement(o.a.Fragment,null,t):o.a.createElement("div",{className:"unsupported-browser"},"This page does not run on Internet Explorer.")},D={users:[{id:"1",label:"sorcerio"},{id:"2",label:"bean"},{id:"3",label:"elfo"}],categories:[{id:"1",label:"Backlog",tasks:[{id:"1",description:"Font size is too small in registration form",userLabel:"sorcerio",labels:[{name:"Low",color:"green"},{name:"All",color:"yellow"}]},{id:"2",description:"Local storage is not cleaned up on logout",userLabel:"bean",labels:[{name:"Medium",color:"orange"},{name:"Chrome",color:"lime"}]},{id:"3",description:"Login doesn't work if third-party cookies are disabled",userLabel:"sorcerio",labels:[{name:"Low",color:"green"},{name:"IE",color:"blue"}]}]},{id:"2",label:"Ready",tasks:[{id:"4",description:"Items are missing from search results when filtering by date",userLabel:"sorcerio",labels:[{name:"Medium",color:"orange"},{name:"All",color:"yellow"}]},{id:"5",description:"Link clicks cause a full page reload",userLabel:"sorcerio",labels:[{name:"Medium",color:"orange"}]}]},{id:"3",label:"In Progress",tasks:[{id:"6",description:"Apple Pay integration is broken on iOS",userLabel:"bean",labels:[{name:"High",color:"red"}]}]},{id:"4",label:"Done",tasks:[]}]};n(22);g.a.load({google:{families:["Lato:400,700,900"]}});var L=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={data:D.categories},n.handleChange=function(e){n.setState({data:e})},n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(S,null,o.a.createElement(m,{users:D.users}),o.a.createElement("div",{className:"task-board-overflow-container"},o.a.createElement(M,{data:this.state.data,onChange:this.handleChange})))}}]),t}(o.a.Component);s.a.render(o.a.createElement(L,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.4483ce79.chunk.js.map